System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui/advanced/data-source-selector","jimu-ui"],(function(e,a){var t={},s={},l={},o={};return{setters:[function(e){t.DataSourceTypes=e.DataSourceTypes,t.FormattedMessage=e.FormattedMessage,t.Immutable=e.Immutable,t.jsx=e.jsx},function(e){s.MapWidgetSelector=e.MapWidgetSelector,s.SettingRow=e.SettingRow,s.SettingSection=e.SettingSection},function(e){l.DataSourceSelector=e.DataSourceSelector},function(e){o.Button=e.Button,o.Switch=e.Switch}],execute:function(){e((()=>{var e={89:e=>{"use strict";e.exports=l},244:e=>{"use strict";e.exports=t},298:e=>{"use strict";e.exports=s},321:e=>{"use strict";e.exports=o}},a={};function i(t){var s=a[t];if(void 0!==s)return s.exports;var l=a[t]={exports:{}};return e[t](l,l.exports,i),l.exports}i.d=(e,a)=>{for(var t in a)i.o(a,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},i.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var n={};return i.p=window.jimuConfig.baseUrl,(()=>{"use strict";i.r(n),i.d(n,{__set_webpack_public_path__:()=>h,default:()=>S});var e=i(244),a=i(298),t=i(89),s=i(321);const l="Parking Lot Field",o="Utilization Field",r="Show Utilization Text",c="Allow Negative Values",d="Full % Threshold",u="Data Format Expected",m="Your data source should contain fields for parking lot names and utilization percentages (0-100). The widget will display color-coded dots based on utilization levels. The widget automatically respects any filters applied to the layer/view in ArcGIS.",g="Color Ranges",x="Add Color Range",p="Min Value",j="Max Value",b="Color",f="Warning: Ranges should not overlap",v="Warning: Min value must be less than max value",S=i=>{const{config:n,id:S,onSettingChange:h,useDataSources:M,useDataSourcesEnabled:y,useMapWidgetIds:N}=i,w=(0,e.Immutable)([e.DataSourceTypes.FeatureLayer,e.DataSourceTypes.SceneLayer]),F=(e,a)=>{h({id:S,config:n.set(e,a)})},R=(e,a,t)=>{const s=n.colorRanges.map(((s,l)=>l===e?Object.assign(Object.assign({},s),{[a]:t}):s));h({id:S,config:n.set("colorRanges",s)})};return(0,e.jsx)("div",{className:"parking-lot-widget-setting p-2"},(0,e.jsx)(a.SettingSection,{title:(0,e.jsx)(e.FormattedMessage,{id:"selectMap",defaultMessage:"Select Map"})},(0,e.jsx)(a.SettingRow,null,(0,e.jsx)(a.MapWidgetSelector,{onSelect:e=>{h({id:S,useMapWidgetIds:e})},useMapWidgetIds:N}))),(0,e.jsx)(t.DataSourceSelector,{types:w,mustUseDataSource:!0,useDataSources:(0,e.Immutable)(M||[]),useDataSourcesEnabled:y,onToggleUseDataEnabled:e=>{h({id:S,useDataSourcesEnabled:e})},onChange:e=>{h({id:S,useDataSources:e||[]})},widgetId:S}),(0,e.jsx)(a.SettingSection,null,(0,e.jsx)("div",{className:"mb-3"},(0,e.jsx)("label",{className:"form-label"},(0,e.jsx)(e.FormattedMessage,{id:"parkingLotField",defaultMessage:l})),(0,e.jsx)("input",{type:"text",className:"form-control",value:n.parkingLotField,onChange:e=>F("parkingLotField",e.target.value),placeholder:"e.g., parking_lot, name, lot_id"})),(0,e.jsx)("div",{className:"mb-3"},(0,e.jsx)("label",{className:"form-label"},(0,e.jsx)(e.FormattedMessage,{id:"utilizationField",defaultMessage:o})),(0,e.jsx)("input",{type:"text",className:"form-control",value:n.utilizationField,onChange:e=>F("utilizationField",e.target.value),placeholder:"e.g., utilisationPercentage, utilization, percent_used"})),(0,e.jsx)("div",{className:"mb-3"},(0,e.jsx)("label",{className:"form-label"},(0,e.jsx)(e.FormattedMessage,{id:"showUtilizationText",defaultMessage:r})),(0,e.jsx)("div",{className:"mt-1"},(0,e.jsx)(s.Switch,{checked:n.showUtilizationText,onChange:e=>{return a=e.target.checked,void h({id:S,config:n.set("showUtilizationText",a)});var a}}))),(0,e.jsx)("div",{className:"mb-3"},(0,e.jsx)("label",{className:"form-label"},(0,e.jsx)(e.FormattedMessage,{id:"allowNegatives",defaultMessage:c})),(0,e.jsx)("div",{className:"mt-1"},(0,e.jsx)(s.Switch,{checked:n.allowNegatives,onChange:e=>{return a=e.target.checked,void h({id:S,config:n.set("allowNegatives",a)});var a}}))),(0,e.jsx)("div",{className:"mb-3"},(0,e.jsx)("label",{className:"form-label",style:{display:"block",marginBottom:"8px"}},(0,e.jsx)(e.FormattedMessage,{id:"fullThreshold",defaultMessage:d})),(0,e.jsx)("input",{type:"number",className:"form-control",value:n.fullThreshold,onChange:e=>{return a=parseInt(e.target.value)||95,void h({id:S,config:n.set("fullThreshold",a)});var a},min:"0",max:"100",placeholder:"e.g., 95"}))),(0,e.jsx)(a.SettingSection,{title:(0,e.jsx)(e.FormattedMessage,{id:"colorRanges",defaultMessage:g})},n.colorRanges.map(((a,t)=>(0,e.jsx)("div",{key:t,className:"color-range-item mb-3 p-3 border rounded"},(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3"},(0,e.jsx)("h6",{className:"mb-0"},"Range ",t+1),(0,e.jsx)("button",{type:"button",className:"btn btn-sm",onClick:()=>(e=>{const a=n.colorRanges.filter(((a,t)=>t!==e));h({id:S,config:n.set("colorRanges",a)})})(t),disabled:n.colorRanges.length<=1,style:{width:"30px",height:"30px",padding:"0",fontSize:"16px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px"}},"\xd7")),(0,e.jsx)("div",{className:"row"},(0,e.jsx)("div",{className:"col-12 mb-3"},(0,e.jsx)("label",{className:"form-label",style:{display:"block",marginBottom:"8px"}},(0,e.jsx)(e.FormattedMessage,{id:"minValue",defaultMessage:p})),(0,e.jsx)("input",{type:"number",className:"form-control",value:a.minValue,onChange:e=>R(t,"minValue",parseInt(e.target.value)||0),min:"0",max:"100"})),(0,e.jsx)("div",{className:"col-12 mb-3"},(0,e.jsx)("label",{className:"form-label",style:{display:"block",marginBottom:"8px"}},(0,e.jsx)(e.FormattedMessage,{id:"maxValue",defaultMessage:j})),(0,e.jsx)("input",{type:"number",className:"form-control",value:a.maxValue,onChange:e=>R(t,"maxValue",parseInt(e.target.value)||100),min:"0",max:"100"})),(0,e.jsx)("div",{className:"col-12"},(0,e.jsx)("label",{className:"form-label",style:{display:"block",marginBottom:"8px"}},(0,e.jsx)(e.FormattedMessage,{id:"color",defaultMessage:b})),(0,e.jsx)("input",{type:"color",className:"form-control",value:a.color,onChange:e=>R(t,"color",e.target.value)})))))),(0,e.jsx)("div",{className:"text-center"},(0,e.jsx)(s.Button,{type:"primary",onClick:()=>{const e=[...n.colorRanges,{minValue:0,maxValue:100,color:"#666666",label:"New Range"}];h({id:S,config:n.set("colorRanges",e)})}},(0,e.jsx)(e.FormattedMessage,{id:"addColorRange",defaultMessage:x}))),!(()=>{const e=n.colorRanges;for(let a=0;a<e.length;a++){const t=e[a];if(t.minValue>=t.maxValue)return!1;for(let s=a+1;s<e.length;s++){const a=e[s];if(t.minValue<=a.maxValue&&t.maxValue>=a.minValue)return!1}}return!0})()&&(0,e.jsx)("div",{className:"alert alert-warning mt-3"},(0,e.jsx)("small",null,(0,e.jsx)(e.FormattedMessage,{id:"rangeOverlapWarning",defaultMessage:f}),(0,e.jsx)("br",null),(0,e.jsx)(e.FormattedMessage,{id:"invalidRangeWarning",defaultMessage:v})))),(0,e.jsx)("div",{className:"setting-section mt-3"},(0,e.jsx)("div",{className:"alert alert-info"},(0,e.jsx)("small",null,(0,e.jsx)("strong",null,(0,e.jsx)(e.FormattedMessage,{id:"dataFormatExpected",defaultMessage:u})),(0,e.jsx)("br",null),(0,e.jsx)(e.FormattedMessage,{id:"dataFormatDescription",defaultMessage:m})))))};function h(e){i.p=e}})(),n})())}}}));