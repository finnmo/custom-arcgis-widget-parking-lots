System.register(["jimu-core","jimu-arcgis"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./finn/widgets/parking-lot-widget/src/runtime/style.css":
/*!***************************************************************!*\
  !*** ./finn/widgets/parking-lot-widget/src/runtime/style.css ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_node_modules_resolve_url_loader_index_js_ruleSet_1_rules_3_use_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_3_use_3_style_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../../../node_modules/resolve-url-loader/index.js??ruleSet[1].rules[3].use[2]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[3]!./style.css */ "./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/resolve-url-loader/index.js??ruleSet[1].rules[3].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[3]!./finn/widgets/parking-lot-widget/src/runtime/style.css");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());
options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_node_modules_resolve_url_loader_index_js_ruleSet_1_rules_3_use_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_3_use_3_style_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_node_modules_resolve_url_loader_index_js_ruleSet_1_rules_3_use_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_3_use_3_style_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_node_modules_resolve_url_loader_index_js_ruleSet_1_rules_3_use_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_3_use_3_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_node_modules_resolve_url_loader_index_js_ruleSet_1_rules_3_use_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_3_use_3_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./finn/widgets/parking-lot-widget/src/runtime/translations/default.ts":
/*!*****************************************************************************!*\
  !*** ./finn/widgets/parking-lot-widget/src/runtime/translations/default.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'Parking Lot Widget',
    parkingLotStatus: 'Parking Lot Status',
    noDataSource: 'No data source configured',
    loadingData: 'Loading parking lot data...',
    errorLoadingData: 'Error loading data source',
    noDataAvailable: 'No parking lot data available',
    configureDataSource: 'Please configure a data source in the widget settings'
});


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/resolve-url-loader/index.js??ruleSet[1].rules[3].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[3]!./finn/widgets/parking-lot-widget/src/runtime/style.css":
/*!***************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/resolve-url-loader/index.js??ruleSet[1].rules[3].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[3]!./finn/widgets/parking-lot-widget/src/runtime/style.css ***!
  \***************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, `.parking-lot-widget {
  padding: 16px;
  font-family: "Avenir Next", "Helvetica Neue", Arial, sans-serif;
}

.widget-header {
  margin-bottom: 16px;
}

.widget-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: #323232;
}

.widget-content {
  min-height: 100px;
}

.parking-lot-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.parking-lot-item {
  background: white;
  border-radius: 8px;
  padding: 10px 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border: 1px solid #e0e0e0;
}

.parking-lot-content {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 2px;
}

.utilization-dot {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  flex-shrink: 0;
  border: 2px solid white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.parking-lot-name {
  font-size: 16px;
  font-weight: 700;
  color: #323232;
  line-height: 1.3;
  display: flex;
  align-items: center;
}

.utilization-text {
  font-size: 14px;
  color: #666666;
  font-weight: 400;
  margin-left: 32px; /* Align with text after the dot */
}

.no-data {
  text-align: center;
  color: #999999;
  font-style: italic;
  padding: 20px;
  background: #f8f8f8;
  border-radius: 8px;
  border: 1px dashed #cccccc;
}

.loading {
  text-align: center;
  color: #666666;
  padding: 20px;
  background: #f8f8f8;
  border-radius: 8px;
  border: 1px solid #e0e0e0;
}

/* Responsive design */
@media (max-width: 480px) {
  .parking-lot-widget {
    padding: 12px;
  }
  .parking-lot-item {
    padding: 10px;
  }
  .parking-lot-name {
    font-size: 14px;
  }
  .utilization-text {
    font-size: 12px;
  }
}
/* Hover effects */
.parking-lot-item:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transform: translateY(-1px);
  transition: all 0.2s ease;
}

/* Loading state */
.parking-lot-widget.loading {
  opacity: 0.6;
  pointer-events: none;
}

.parking-lot-widget.loading::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid #f3f3f3;
  border-top: 2px solid #3498db;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}`, "",{"version":3,"sources":["webpack://./finn/widgets/parking-lot-widget/src/runtime/style.css"],"names":[],"mappings":"AAAA;EACE,aAAA;EACA,+DAAA;AACF;;AAEA;EACE,mBAAA;AACF;;AAEA;EACE,SAAA;EACA,eAAA;EACA,gBAAA;EACA,cAAA;AACF;;AAEA;EACE,iBAAA;AACF;;AAEA;EACE,aAAA;EACA,sBAAA;EACA,SAAA;AACF;;AAEA;EACE,iBAAA;EACA,kBAAA;EACA,kBAAA;EACA,wCAAA;EACA,yBAAA;AACF;;AAEA;EACE,aAAA;EACA,mBAAA;EACA,SAAA;EACA,kBAAA;AACF;;AAEA;EACE,WAAA;EACA,YAAA;EACA,kBAAA;EACA,cAAA;EACA,uBAAA;EACA,wCAAA;AACF;;AAEA;EACE,eAAA;EACA,gBAAA;EACA,cAAA;EACA,gBAAA;EACA,aAAA;EACA,mBAAA;AACF;;AAEA;EACE,eAAA;EACA,cAAA;EACA,gBAAA;EACA,iBAAA,EAAA,kCAAA;AACF;;AAEA;EACE,kBAAA;EACA,cAAA;EACA,kBAAA;EACA,aAAA;EACA,mBAAA;EACA,kBAAA;EACA,0BAAA;AACF;;AAEA;EACE,kBAAA;EACA,cAAA;EACA,aAAA;EACA,mBAAA;EACA,kBAAA;EACA,yBAAA;AACF;;AAEA,sBAAA;AACA;EACE;IACE,aAAA;EACF;EAEA;IACE,aAAA;EAAF;EAGA;IACE,eAAA;EADF;EAIA;IACE,eAAA;EAFF;AACF;AAKA,kBAAA;AACA;EACE,0CAAA;EACA,2BAAA;EACA,yBAAA;AAHF;;AAMA,kBAAA;AACA;EACE,YAAA;EACA,oBAAA;AAHF;;AAMA;EACE,WAAA;EACA,kBAAA;EACA,QAAA;EACA,SAAA;EACA,WAAA;EACA,YAAA;EACA,uBAAA;EACA,yBAAA;EACA,6BAAA;EACA,kBAAA;EACA,kCAAA;AAHF;;AAMA;EACE;IAAK,uBAAA;EAFL;EAGA;IAAO,yBAAA;EAAP;AACF","sourcesContent":[".parking-lot-widget {\n  padding: 16px;\n  font-family: 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;\n}\n\n.widget-header {\n  margin-bottom: 16px;\n}\n\n.widget-header h3 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #323232;\n}\n\n.widget-content {\n  min-height: 100px;\n}\n\n.parking-lot-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.parking-lot-item {\n  background: white;\n  border-radius: 8px;\n  padding: 10px 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e0e0e0;\n}\n\n.parking-lot-content {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 2px;\n}\n\n.utilization-dot {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  flex-shrink: 0;\n  border: 2px solid white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n\n.parking-lot-name {\n  font-size: 16px;\n  font-weight: 700;\n  color: #323232;\n  line-height: 1.3;\n  display: flex;\n  align-items: center;\n}\n\n.utilization-text {\n  font-size: 14px;\n  color: #666666;\n  font-weight: 400;\n  margin-left: 32px; /* Align with text after the dot */\n}\n\n.no-data {\n  text-align: center;\n  color: #999999;\n  font-style: italic;\n  padding: 20px;\n  background: #f8f8f8;\n  border-radius: 8px;\n  border: 1px dashed #cccccc;\n}\n\n.loading {\n  text-align: center;\n  color: #666666;\n  padding: 20px;\n  background: #f8f8f8;\n  border-radius: 8px;\n  border: 1px solid #e0e0e0;\n}\n\n/* Responsive design */\n@media (max-width: 480px) {\n  .parking-lot-widget {\n    padding: 12px;\n  }\n  \n  .parking-lot-item {\n    padding: 10px;\n  }\n  \n  .parking-lot-name {\n    font-size: 14px;\n  }\n  \n  .utilization-text {\n    font-size: 12px;\n  }\n}\n\n/* Hover effects */\n.parking-lot-item:hover {\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  transform: translateY(-1px);\n  transition: all 0.2s ease;\n}\n\n/* Loading state */\n.parking-lot-widget.loading {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.parking-lot-widget.loading::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 20px;\n  height: 20px;\n  margin: -10px 0 0 -10px;\n  border: 2px solid #f3f3f3;\n  border-top: 2px solid #3498db;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
module.exports = function (cssWithMappingToString) {
  var list = [];

  // return the list of modules as css string
  list.toString = function toString() {
    return this.map(function (item) {
      var content = "";
      var needLayer = typeof item[5] !== "undefined";
      if (item[4]) {
        content += "@supports (".concat(item[4], ") {");
      }
      if (item[2]) {
        content += "@media ".concat(item[2], " {");
      }
      if (needLayer) {
        content += "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {");
      }
      content += cssWithMappingToString(item);
      if (needLayer) {
        content += "}";
      }
      if (item[2]) {
        content += "}";
      }
      if (item[4]) {
        content += "}";
      }
      return content;
    }).join("");
  };

  // import a list of modules into the list
  list.i = function i(modules, media, dedupe, supports, layer) {
    if (typeof modules === "string") {
      modules = [[null, modules, undefined]];
    }
    var alreadyImportedModules = {};
    if (dedupe) {
      for (var k = 0; k < this.length; k++) {
        var id = this[k][0];
        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }
    for (var _k = 0; _k < modules.length; _k++) {
      var item = [].concat(modules[_k]);
      if (dedupe && alreadyImportedModules[item[0]]) {
        continue;
      }
      if (typeof layer !== "undefined") {
        if (typeof item[5] === "undefined") {
          item[5] = layer;
        } else {
          item[1] = "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {").concat(item[1], "}");
          item[5] = layer;
        }
      }
      if (media) {
        if (!item[2]) {
          item[2] = media;
        } else {
          item[1] = "@media ".concat(item[2], " {").concat(item[1], "}");
          item[2] = media;
        }
      }
      if (supports) {
        if (!item[4]) {
          item[4] = "".concat(supports);
        } else {
          item[1] = "@supports (".concat(item[4], ") {").concat(item[1], "}");
          item[4] = supports;
        }
      }
      list.push(item);
    }
  };
  return list;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/sourceMaps.js":
/*!************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/sourceMaps.js ***!
  \************************************************************/
/***/ ((module) => {

"use strict";


module.exports = function (item) {
  var content = item[1];
  var cssMapping = item[3];
  if (!cssMapping) {
    return content;
  }
  if (typeof btoa === "function") {
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    return [content].concat([sourceMapping]).join("\n");
  }
  return [content].join("\n");
};

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {

"use strict";


var stylesInDOM = [];
function getIndexByIdentifier(identifier) {
  var result = -1;
  for (var i = 0; i < stylesInDOM.length; i++) {
    if (stylesInDOM[i].identifier === identifier) {
      result = i;
      break;
    }
  }
  return result;
}
function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];
  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var indexByIdentifier = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3],
      supports: item[4],
      layer: item[5]
    };
    if (indexByIdentifier !== -1) {
      stylesInDOM[indexByIdentifier].references++;
      stylesInDOM[indexByIdentifier].updater(obj);
    } else {
      var updater = addElementStyle(obj, options);
      options.byIndex = i;
      stylesInDOM.splice(i, 0, {
        identifier: identifier,
        updater: updater,
        references: 1
      });
    }
    identifiers.push(identifier);
  }
  return identifiers;
}
function addElementStyle(obj, options) {
  var api = options.domAPI(options);
  api.update(obj);
  var updater = function updater(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {
        return;
      }
      api.update(obj = newObj);
    } else {
      api.remove();
    }
  };
  return updater;
}
module.exports = function (list, options) {
  options = options || {};
  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];
    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDOM[index].references--;
    }
    var newLastIdentifiers = modulesToDom(newList, options);
    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];
      var _index = getIndexByIdentifier(_identifier);
      if (stylesInDOM[_index].references === 0) {
        stylesInDOM[_index].updater();
        stylesInDOM.splice(_index, 1);
      }
    }
    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {

"use strict";


var memo = {};

/* istanbul ignore next  */
function getTarget(target) {
  if (typeof memo[target] === "undefined") {
    var styleTarget = document.querySelector(target);

    // Special case to return head of iframe instead of iframe itself
    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
      try {
        // This will throw an exception if access to iframe is blocked
        // due to cross-origin restrictions
        styleTarget = styleTarget.contentDocument.head;
      } catch (e) {
        // istanbul ignore next
        styleTarget = null;
      }
    }
    memo[target] = styleTarget;
  }
  return memo[target];
}

/* istanbul ignore next  */
function insertBySelector(insert, style) {
  var target = getTarget(insert);
  if (!target) {
    throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
  }
  target.appendChild(style);
}
module.exports = insertBySelector;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";


/* istanbul ignore next  */
function insertStyleElement(options) {
  var element = document.createElement("style");
  options.setAttributes(element, options.attributes);
  options.insert(element, options.options);
  return element;
}
module.exports = insertStyleElement;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


/* istanbul ignore next  */
function setAttributesWithoutAttributes(styleElement) {
  var nonce =  true ? __webpack_require__.nc : 0;
  if (nonce) {
    styleElement.setAttribute("nonce", nonce);
  }
}
module.exports = setAttributesWithoutAttributes;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {

"use strict";


/* istanbul ignore next  */
function apply(styleElement, options, obj) {
  var css = "";
  if (obj.supports) {
    css += "@supports (".concat(obj.supports, ") {");
  }
  if (obj.media) {
    css += "@media ".concat(obj.media, " {");
  }
  var needLayer = typeof obj.layer !== "undefined";
  if (needLayer) {
    css += "@layer".concat(obj.layer.length > 0 ? " ".concat(obj.layer) : "", " {");
  }
  css += obj.css;
  if (needLayer) {
    css += "}";
  }
  if (obj.media) {
    css += "}";
  }
  if (obj.supports) {
    css += "}";
  }
  var sourceMap = obj.sourceMap;
  if (sourceMap && typeof btoa !== "undefined") {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  }

  // For old IE
  /* istanbul ignore if  */
  options.styleTagTransform(css, styleElement, options.options);
}
function removeStyleElement(styleElement) {
  // istanbul ignore if
  if (styleElement.parentNode === null) {
    return false;
  }
  styleElement.parentNode.removeChild(styleElement);
}

/* istanbul ignore next  */
function domAPI(options) {
  if (typeof document === "undefined") {
    return {
      update: function update() {},
      remove: function remove() {}
    };
  }
  var styleElement = options.insertStyleElement(options);
  return {
    update: function update(obj) {
      apply(styleElement, options, obj);
    },
    remove: function remove() {
      removeStyleElement(styleElement);
    }
  };
}
module.exports = domAPI;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";


/* istanbul ignore next  */
function styleTagTransform(css, styleElement) {
  if (styleElement.styleSheet) {
    styleElement.styleSheet.cssText = css;
  } else {
    while (styleElement.firstChild) {
      styleElement.removeChild(styleElement.firstChild);
    }
    styleElement.appendChild(document.createTextNode(css));
  }
}
module.exports = styleTagTransform;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!****************************************************************!*\
  !*** ./finn/widgets/parking-lot-widget/src/runtime/widget.tsx ***!
  \****************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./style.css */ "./finn/widgets/parking-lot-widget/src/runtime/style.css");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./translations/default */ "./finn/widgets/parking-lot-widget/src/runtime/translations/default.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/** @jsx jsx */




const Widget = (props) => {
    const { config, id, useDataSources, useMapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(null);
    const [parkingLotLabels, setParkingLotLabels] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState([]);
    const [mapContainer, setMapContainer] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(null);
    const [labelsCreated, setLabelsCreated] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [currentZoom, setCurrentZoom] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(0);
    const labelsRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef([]);
    // Handle map view activation
    const onActiveViewChange = (jmv) => {
        if (jmv) {
            setJimuMapView(jmv);
            // Try multiple selectors to find the map container
            let mapElement = document.querySelector(`[data-widget-id="${useMapWidgetIds === null || useMapWidgetIds === void 0 ? void 0 : useMapWidgetIds[0]}"] .map-root`);
            if (!mapElement) {
                // Try alternative selectors
                mapElement = document.querySelector(`[data-widget-id="${useMapWidgetIds === null || useMapWidgetIds === void 0 ? void 0 : useMapWidgetIds[0]}"] .esri-view`);
                if (!mapElement) {
                    mapElement = document.querySelector(`[data-widget-id="${useMapWidgetIds === null || useMapWidgetIds === void 0 ? void 0 : useMapWidgetIds[0]}"] .esri-view-root`);
                }
                if (!mapElement) {
                    mapElement = document.querySelector(`[data-widget-id="${useMapWidgetIds === null || useMapWidgetIds === void 0 ? void 0 : useMapWidgetIds[0]}"]`);
                }
            }
            if (mapElement) {
                setMapContainer(mapElement);
            }
            else {
                // Fallback: try to find any map view element
                const fallbackElement = document.querySelector('.esri-view-root');
                if (fallbackElement) {
                    setMapContainer(fallbackElement);
                }
            }
        }
    };
    // Update label positions when map view changes
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (jimuMapView && parkingLotLabels.length > 0) {
            const updateLabelPositions = () => {
                const zoom = jimuMapView.view.zoom;
                setCurrentZoom(zoom);
                // Calculate scale factor based on zoom level
                const scale = Math.max(0.3, Math.min(1.0, (zoom - 10) / 8));
                parkingLotLabels.forEach(label => {
                    try {
                        const screenPoint = jimuMapView.view.toScreen(label.geometry);
                        if (label.element) {
                            // Apply scaling with tail position as origin (20px from left)
                            label.element.style.transform = `scale(${scale})`;
                            label.element.style.transformOrigin = '20px bottom';
                            // Get the element height to position it above the point
                            const elementHeight = label.element.offsetHeight || 60;
                            // Fixed offset - tail should point to the exact coordinate
                            label.element.style.left = `${screenPoint.x - 20}px`;
                            label.element.style.top = `${screenPoint.y - elementHeight - 8}px`;
                        }
                    }
                    catch (error) {
                        // Silently handle position update errors
                    }
                });
            };
            // Update positions on view changes
            jimuMapView.view.watch('extent', updateLabelPositions);
            jimuMapView.view.watch('center', updateLabelPositions);
            jimuMapView.view.watch('zoom', updateLabelPositions);
            // Initial position update
            updateLabelPositions();
        }
    }, [jimuMapView, parkingLotLabels]);
    // Clean up labels when widget unmounts
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        return () => {
            parkingLotLabels.forEach(label => {
                if (label.element && label.element.parentNode) {
                    label.element.parentNode.removeChild(label.element);
                }
            });
        };
    }, [parkingLotLabels]);
    // Reset labels when data source or config changes
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        // Always clear and reset when config changes
        const cleanup = () => {
            // Remove all labels from DOM
            const allLabels = document.querySelectorAll('.parking-lot-map-label');
            allLabels.forEach(el => {
                if (el.parentNode) {
                    el.parentNode.removeChild(el);
                }
            });
            // Clear state
            setParkingLotLabels([]);
            setLabelsCreated(false);
        };
        cleanup();
    }, [useDataSources, config.parkingLotField, config.utilizationField, config.showUtilizationText, config.allowNegatives, config.colorRanges, config.fullThreshold]);
    const getUtilizationColor = (percentage) => {
        // Handle negative values based on setting
        let adjustedPercentage = percentage;
        if (!config.allowNegatives && percentage < 0) {
            adjustedPercentage = 0;
        }
        // Clamp percentage to 0-100 range
        adjustedPercentage = Math.max(0, Math.min(100, adjustedPercentage));
        // Round to avoid decimal precision issues
        adjustedPercentage = Math.round(adjustedPercentage);
        // Sort ranges by minValue to ensure correct matching
        const sortedRanges = [...config.colorRanges].sort((a, b) => a.minValue - b.minValue);
        // Find the color range that matches the percentage
        const matchingRange = sortedRanges.find(range => adjustedPercentage >= range.minValue && adjustedPercentage <= range.maxValue);
        // If still no match, find the closest range
        if (!matchingRange && sortedRanges.length > 0) {
            // Find the range with the closest minValue
            const closestRange = sortedRanges.reduce((prev, curr) => {
                return Math.abs(curr.minValue - adjustedPercentage) < Math.abs(prev.minValue - adjustedPercentage)
                    ? curr
                    : prev;
            });
            return closestRange.color;
        }
        // If no match found at all, default to red (high utilization) for safety
        // Grey should only be used for "closed" status in the future
        return matchingRange ? matchingRange.color : '#F44336';
    };
    const getUtilizationText = (percentage) => {
        let freePercentage = 100 - percentage;
        // Handle negative values based on setting
        if (!config.allowNegatives && freePercentage < 0) {
            freePercentage = 0;
        }
        // Check if availability is 10% or less (utilization 90% or more)
        // Show "Full" instead of the low percentage
        if (freePercentage <= 10) {
            return 'Full';
        }
        return `${Math.round(freePercentage)}% Available`;
    };
    // Create custom HTML labels
    const createCustomLabels = (records) => __awaiter(void 0, void 0, void 0, function* () {
        if (!mapContainer || !jimuMapView) {
            return;
        }
        // Load required modules
        let projection = null;
        let Point = null;
        try {
            const modules = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/geometry/projection', 'esri/geometry/Point', 'esri/geometry/SpatialReference']);
            projection = modules[0];
            Point = modules[1];
            const SpatialReference = modules[2];
            yield projection.load();
        }
        catch (error) {
            // Silently handle projection errors
        }
        // Clear ALL existing labels from DOM using ref
        labelsRef.current.forEach(label => {
            if (label.element && label.element.parentNode) {
                label.element.parentNode.removeChild(label.element);
            }
        });
        // Also query and remove any orphaned labels
        const orphanedLabels = document.querySelectorAll('.parking-lot-map-label');
        orphanedLabels.forEach(el => {
            if (el.parentNode) {
                el.parentNode.removeChild(el);
            }
        });
        labelsRef.current = [];
        setParkingLotLabels([]);
        const newLabels = [];
        for (const record of records) {
            const data = record.attributes;
            const parkingLotName = data[config.parkingLotField];
            const utilizationPercentage = data[config.utilizationField];
            let geometry = record.geometry;
            if (!geometry || !parkingLotName)
                continue;
            const utilizationColor = getUtilizationColor(Number(utilizationPercentage) || 0);
            const utilizationText = config.showUtilizationText ? getUtilizationText(Number(utilizationPercentage) || 0) : '';
            // Project geometry if needed
            try {
                const mapSR = jimuMapView.view.spatialReference;
                const geomSR = geometry.spatialReference;
                if (projection && geomSR && mapSR && geomSR.wkid !== mapSR.wkid) {
                    const projectedGeom = projection.project(geometry, mapSR);
                    if (projectedGeom) {
                        geometry = projectedGeom;
                    }
                }
            }
            catch (error) {
                // Silently handle projection errors
            }
            // Convert geometry to screen coordinates
            let screenPoint;
            try {
                screenPoint = jimuMapView.view.toScreen(geometry);
            }
            catch (error) {
                continue; // Skip this label if we can't convert coordinates
            }
            // Create custom HTML label element
            const labelElement = document.createElement('div');
            labelElement.className = 'parking-lot-map-label';
            labelElement.style.cssText = `
        position: absolute;
        left: ${screenPoint.x - 50}px;
        top: ${screenPoint.y - 30}px;
        background: white;
        border-radius: 12px;
        padding: 8px 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        border: 1px solid #d0d0d0;
        font-family: 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;
        z-index: 1000;
        pointer-events: none;
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 140px;
      `;
            // Add speech bubble tail (moved to left side)
            const tailElement = document.createElement('div');
            tailElement.style.cssText = `
        position: absolute;
        bottom: -8px;
        left: 20px;
        width: 0;
        height: 0;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-top: 8px solid white;
        z-index: 1001;
      `;
            // Add tail border
            const tailBorderElement = document.createElement('div');
            tailBorderElement.style.cssText = `
        position: absolute;
        bottom: -9px;
        left: 20px;
        width: 0;
        height: 0;
        border-left: 9px solid transparent;
        border-right: 9px solid transparent;
        border-top: 9px solid #d0d0d0;
        z-index: 1000;
      `;
            // Create colored dot 
            const dotElement = document.createElement('div');
            dotElement.style.cssText = `
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: ${utilizationColor};
        flex-shrink: 0;
      `;
            // Create text container
            const textContainer = document.createElement('div');
            textContainer.style.cssText = `
        display: flex;
        flex-direction: column;
        gap: 1px;
      `;
            // Create utilization text (first, so it appears on top - extra bold, black, big)
            if (config.showUtilizationText) {
                const utilElement = document.createElement('div');
                utilElement.textContent = utilizationText;
                utilElement.style.cssText = `
          font-size: 16px;
          color: #000000;
          line-height: 1.2;
          font-weight: 900;
        `;
                textContainer.appendChild(utilElement);
            }
            // Create parking lot name (second, so it appears below - black, bold, slightly larger)
            const nameElement = document.createElement('div');
            nameElement.textContent = parkingLotName;
            nameElement.style.cssText = `
        font-size: 13px;
        font-weight: 700;
        color: #000000;
        line-height: 1.2;
      `;
            textContainer.appendChild(nameElement);
            labelElement.appendChild(dotElement);
            labelElement.appendChild(textContainer);
            // Add tail elements
            labelElement.appendChild(tailBorderElement);
            labelElement.appendChild(tailElement);
            // Add to map container
            mapContainer.appendChild(labelElement);
            // Store label info
            newLabels.push({
                element: labelElement,
                geometry: geometry,
                data: data
            });
        }
        labelsRef.current = newLabels;
        setParkingLotLabels(newLabels);
    });
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "parking-lot-widget jimu-widget", "data-widget-id": id, style: { width: '100%', height: '100%', overflow: 'hidden', position: 'relative' } },
        useMapWidgetIds && useMapWidgetIds.length > 0 && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.JimuMapViewComponent, { useMapWidgetId: useMapWidgetIds[0], onActiveViewChange: onActiveViewChange })),
        useDataSources && useDataSources.length > 0 && mapContainer ? ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceComponent, { useDataSource: useDataSources[0], widgetId: id, query: { page: 1, pageSize: 1000 } }, (ds) => {
            if (!ds) {
                return null;
            }
            if (ds.getStatus() === 'LOADED' && !labelsCreated) {
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
                const dataSource = dsManager.getDataSource(useDataSources[0].dataSourceId);
                if (dataSource && dataSource.type === 'FEATURE_LAYER') {
                    const featureLayerDs = dataSource;
                    const layer = featureLayerDs.layer;
                    if (layer) {
                        // Wait for map to be fully loaded before querying
                        const waitForMapReady = () => {
                            var _a;
                            if ((_a = jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) === null || _a === void 0 ? void 0 : _a.ready) {
                                // Respect the layer's definition expression (from views/filters)
                                // If no definition expression exists, use '1=1' to get all features
                                const whereClause = layer.definitionExpression || '1=1';
                                layer.queryFeatures({
                                    where: whereClause,
                                    outFields: ['*'],
                                    returnGeometry: true
                                }).then((result) => {
                                    if (result.features && result.features.length > 0) {
                                        // Add a small delay to ensure projection is ready
                                        setTimeout(() => {
                                            createCustomLabels(result.features);
                                            setLabelsCreated(true);
                                        }, 500);
                                    }
                                }).catch((error) => {
                                    var _a;
                                    // Retry after a delay if projection error
                                    if ((_a = error.message) === null || _a === void 0 ? void 0 : _a.includes('projection')) {
                                        setTimeout(() => {
                                            waitForMapReady();
                                        }, 1000);
                                    }
                                });
                            }
                            else {
                                setTimeout(waitForMapReady, 100);
                            }
                        };
                        waitForMapReady();
                    }
                    else {
                        // Silently handle missing layer
                    }
                }
                else {
                    // Silently handle non-feature layer
                }
            }
            return null;
        })) : null,
        useMapWidgetIds && useMapWidgetIds.length > 0 && useDataSources && useDataSources.length > 0 && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: {
                position: 'absolute',
                bottom: '20px',
                right: '20px',
                background: 'rgba(255, 255, 255, 0.75)',
                borderRadius: '8px',
                padding: '16px 20px',
                boxShadow: '0 2px 8px rgba(0,0,0,0.2)',
                zIndex: 2000,
                minWidth: '160px'
            } },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: {
                    fontSize: '16px',
                    fontWeight: 'bold',
                    color: '#000000',
                    marginBottom: '12px',
                    textAlign: 'center',
                    fontFamily: 'Avenir Next, Helvetica Neue, Arial, sans-serif'
                } }, "Availability Guide"),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '8px' } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: {
                        width: '16px',
                        height: '16px',
                        borderRadius: '50%',
                        backgroundColor: '#4CAF50',
                        flexShrink: 0
                    } }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { style: {
                        fontSize: '14px',
                        color: '#000000',
                        fontFamily: 'Avenir Next, Helvetica Neue, Arial, sans-serif'
                    } }, "High")),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '8px' } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: {
                        width: '16px',
                        height: '16px',
                        borderRadius: '50%',
                        backgroundColor: '#FFC107',
                        flexShrink: 0
                    } }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { style: {
                        fontSize: '14px',
                        color: '#000000',
                        fontFamily: 'Avenir Next, Helvetica Neue, Arial, sans-serif'
                    } }, "Medium")),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '8px' } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: {
                        width: '16px',
                        height: '16px',
                        borderRadius: '50%',
                        backgroundColor: '#F44336',
                        flexShrink: 0
                    } }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { style: {
                        fontSize: '14px',
                        color: '#000000',
                        fontFamily: 'Avenir Next, Helvetica Neue, Arial, sans-serif'
                    } }, "Low or Full")),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { display: 'flex', alignItems: 'center', gap: '10px' } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: {
                        width: '16px',
                        height: '16px',
                        borderRadius: '50%',
                        backgroundColor: '#666666',
                        flexShrink: 0
                    } }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { style: {
                        fontSize: '14px',
                        color: '#000000',
                        fontFamily: 'Avenir Next, Helvetica Neue, Arial, sans-serif'
                    } }, "Closed")))),
        !useMapWidgetIds || useMapWidgetIds.length === 0 ? ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "no-data" },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.FormattedMessage, { id: "selectMap", defaultMessage: "Please select a map widget in the settings" }))) : !useDataSources || useDataSources.length === 0 ? ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "no-data" },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.FormattedMessage, { id: "configureDataSource", defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_3__["default"].configureDataSource }))) : null));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9wYXJraW5nLWxvdC13aWRnZXQvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUEyRztBQUMzRyxNQUFpRztBQUNqRyxNQUF3RztBQUN4RyxNQUEySDtBQUMzSCxNQUFvSDtBQUNwSCxNQUFvSDtBQUNwSCxNQUErUztBQUMvUztBQUNBOztBQUVBOztBQUVBLDRCQUE0QixxR0FBbUI7QUFDL0Msd0JBQXdCLGtIQUFhO0FBQ3JDLGlCQUFpQix1R0FBYTtBQUM5QixpQkFBaUIsK0ZBQU07QUFDdkIsNkJBQTZCLHNHQUFrQjs7QUFFL0MsYUFBYSwwR0FBRyxDQUFDLDRPQUFPOzs7O0FBSXlQO0FBQ2pSLE9BQU8saUVBQWUsNE9BQU8sSUFBSSw0T0FBTyxVQUFVLDRPQUFPLG1CQUFtQixFQUFDOzs7Ozs7Ozs7Ozs7Ozs7O0FDeEI3RSxpRUFBZTtJQUNiLFlBQVksRUFBRSxvQkFBb0I7SUFDbEMsZ0JBQWdCLEVBQUUsb0JBQW9CO0lBQ3RDLFlBQVksRUFBRSwyQkFBMkI7SUFDekMsV0FBVyxFQUFFLDZCQUE2QjtJQUMxQyxnQkFBZ0IsRUFBRSwyQkFBMkI7SUFDN0MsZUFBZSxFQUFFLCtCQUErQjtJQUNoRCxtQkFBbUIsRUFBRSx1REFBdUQ7Q0FDN0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUkQ7QUFDc0g7QUFDakI7QUFDckcsOEJBQThCLG1GQUEyQixDQUFDLDRGQUFxQztBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsT0FBTyx3SEFBd0gsVUFBVSxXQUFXLE1BQU0sS0FBSyxXQUFXLE1BQU0sS0FBSyxVQUFVLFVBQVUsV0FBVyxVQUFVLE1BQU0sS0FBSyxXQUFXLE1BQU0sS0FBSyxVQUFVLFdBQVcsVUFBVSxNQUFNLEtBQUssV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLE1BQU0sS0FBSyxVQUFVLFdBQVcsVUFBVSxXQUFXLE1BQU0sS0FBSyxVQUFVLFVBQVUsV0FBVyxVQUFVLFdBQVcsV0FBVyxNQUFNLEtBQUssVUFBVSxXQUFXLFVBQVUsV0FBVyxVQUFVLFdBQVcsTUFBTSxLQUFLLFVBQVUsVUFBVSxXQUFXLHNCQUFzQixNQUFNLEtBQUssV0FBVyxVQUFVLFdBQVcsVUFBVSxXQUFXLFdBQVcsV0FBVyxNQUFNLEtBQUssV0FBVyxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsTUFBTSxXQUFXLEtBQUssS0FBSyxVQUFVLEtBQUssS0FBSyxVQUFVLEtBQUssS0FBSyxVQUFVLEtBQUssS0FBSyxVQUFVLEtBQUssS0FBSyxXQUFXLEtBQUssV0FBVyxXQUFXLFdBQVcs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YnBhY2s6Ly9leGItY2xpZW50Ly4vZmlubi93aWRnZXRzL3BhcmtpbmctbG90LXdpZGdldC9zcmMvcnVudGltZS9zdHlsZS5jc3M/MTgzZiIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZmlubi93aWRnZXRzL3BhcmtpbmctbG90LXdpZGdldC9zcmMvcnVudGltZS90cmFuc2xhdGlvbnMvZGVmYXVsdC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZmlubi93aWRnZXRzL3BhcmtpbmctbG90LXdpZGdldC9zcmMvcnVudGltZS9zdHlsZS5jc3MiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWFyY2dpc1wiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS1jb3JlL2xpYi9zZXQtcHVibGljLXBhdGgudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2Zpbm4vd2lkZ2V0cy9wYXJraW5nLWxvdC13aWRnZXQvc3JjL3J1bnRpbWUvd2lkZ2V0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzNdLnVzZVsxXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVzb2x2ZS11cmwtbG9hZGVyL2luZGV4LmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzNdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbM10udXNlWzNdIS4vc3R5bGUuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5vcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzNdLnVzZVsxXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVzb2x2ZS11cmwtbG9hZGVyL2luZGV4LmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzNdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbM10udXNlWzNdIS4vc3R5bGUuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBfd2lkZ2V0TGFiZWw6ICdQYXJraW5nIExvdCBXaWRnZXQnLFxuICBwYXJraW5nTG90U3RhdHVzOiAnUGFya2luZyBMb3QgU3RhdHVzJyxcbiAgbm9EYXRhU291cmNlOiAnTm8gZGF0YSBzb3VyY2UgY29uZmlndXJlZCcsXG4gIGxvYWRpbmdEYXRhOiAnTG9hZGluZyBwYXJraW5nIGxvdCBkYXRhLi4uJyxcbiAgZXJyb3JMb2FkaW5nRGF0YTogJ0Vycm9yIGxvYWRpbmcgZGF0YSBzb3VyY2UnLFxuICBub0RhdGFBdmFpbGFibGU6ICdObyBwYXJraW5nIGxvdCBkYXRhIGF2YWlsYWJsZScsXG4gIGNvbmZpZ3VyZURhdGFTb3VyY2U6ICdQbGVhc2UgY29uZmlndXJlIGEgZGF0YSBzb3VyY2UgaW4gdGhlIHdpZGdldCBzZXR0aW5ncydcbn1cblxuXG5cbiIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAucGFya2luZy1sb3Qtd2lkZ2V0IHtcbiAgcGFkZGluZzogMTZweDtcbiAgZm9udC1mYW1pbHk6IFwiQXZlbmlyIE5leHRcIiwgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBBcmlhbCwgc2Fucy1zZXJpZjtcbn1cblxuLndpZGdldC1oZWFkZXIge1xuICBtYXJnaW4tYm90dG9tOiAxNnB4O1xufVxuXG4ud2lkZ2V0LWhlYWRlciBoMyB7XG4gIG1hcmdpbjogMDtcbiAgZm9udC1zaXplOiAxOHB4O1xuICBmb250LXdlaWdodDogNjAwO1xuICBjb2xvcjogIzMyMzIzMjtcbn1cblxuLndpZGdldC1jb250ZW50IHtcbiAgbWluLWhlaWdodDogMTAwcHg7XG59XG5cbi5wYXJraW5nLWxvdC1saXN0IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZ2FwOiAxMnB4O1xufVxuXG4ucGFya2luZy1sb3QtaXRlbSB7XG4gIGJhY2tncm91bmQ6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIHBhZGRpbmc6IDEwcHggMTJweDtcbiAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDtcbn1cblxuLnBhcmtpbmctbG90LWNvbnRlbnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDEycHg7XG4gIG1hcmdpbi1ib3R0b206IDJweDtcbn1cblxuLnV0aWxpemF0aW9uLWRvdCB7XG4gIHdpZHRoOiAyMHB4O1xuICBoZWlnaHQ6IDIwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgZmxleC1zaHJpbms6IDA7XG4gIGJvcmRlcjogMnB4IHNvbGlkIHdoaXRlO1xuICBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLCAwLCAwLCAwLjIpO1xufVxuXG4ucGFya2luZy1sb3QtbmFtZSB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgY29sb3I6ICMzMjMyMzI7XG4gIGxpbmUtaGVpZ2h0OiAxLjM7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi51dGlsaXphdGlvbi10ZXh0IHtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBjb2xvcjogIzY2NjY2NjtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgbWFyZ2luLWxlZnQ6IDMycHg7IC8qIEFsaWduIHdpdGggdGV4dCBhZnRlciB0aGUgZG90ICovXG59XG5cbi5uby1kYXRhIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogIzk5OTk5OTtcbiAgZm9udC1zdHlsZTogaXRhbGljO1xuICBwYWRkaW5nOiAyMHB4O1xuICBiYWNrZ3JvdW5kOiAjZjhmOGY4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjY2NjO1xufVxuXG4ubG9hZGluZyB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6ICM2NjY2NjY7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIGJhY2tncm91bmQ6ICNmOGY4Zjg7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDtcbn1cblxuLyogUmVzcG9uc2l2ZSBkZXNpZ24gKi9cbkBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xuICAucGFya2luZy1sb3Qtd2lkZ2V0IHtcbiAgICBwYWRkaW5nOiAxMnB4O1xuICB9XG4gIC5wYXJraW5nLWxvdC1pdGVtIHtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICB9XG4gIC5wYXJraW5nLWxvdC1uYW1lIHtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gIH1cbiAgLnV0aWxpemF0aW9uLXRleHQge1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgfVxufVxuLyogSG92ZXIgZWZmZWN0cyAqL1xuLnBhcmtpbmctbG90LWl0ZW06aG92ZXIge1xuICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbn1cblxuLyogTG9hZGluZyBzdGF0ZSAqL1xuLnBhcmtpbmctbG90LXdpZGdldC5sb2FkaW5nIHtcbiAgb3BhY2l0eTogMC42O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLnBhcmtpbmctbG90LXdpZGdldC5sb2FkaW5nOjphZnRlciB7XG4gIGNvbnRlbnQ6IFwiXCI7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1MCU7XG4gIGxlZnQ6IDUwJTtcbiAgd2lkdGg6IDIwcHg7XG4gIGhlaWdodDogMjBweDtcbiAgbWFyZ2luOiAtMTBweCAwIDAgLTEwcHg7XG4gIGJvcmRlcjogMnB4IHNvbGlkICNmM2YzZjM7XG4gIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMzQ5OGRiO1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG59XG5cbkBrZXlmcmFtZXMgc3BpbiB7XG4gIDAlIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgfVxuICAxMDAlIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xuICB9XG59YCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9maW5uL3dpZGdldHMvcGFya2luZy1sb3Qtd2lkZ2V0L3NyYy9ydW50aW1lL3N0eWxlLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFLGFBQUE7RUFDQSwrREFBQTtBQUNGOztBQUVBO0VBQ0UsbUJBQUE7QUFDRjs7QUFFQTtFQUNFLFNBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxjQUFBO0FBQ0Y7O0FBRUE7RUFDRSxpQkFBQTtBQUNGOztBQUVBO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsU0FBQTtBQUNGOztBQUVBO0VBQ0UsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0Esd0NBQUE7RUFDQSx5QkFBQTtBQUNGOztBQUVBO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsU0FBQTtFQUNBLGtCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLHVCQUFBO0VBQ0Esd0NBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGNBQUE7RUFDQSxnQkFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtBQUNGOztBQUVBO0VBQ0UsZUFBQTtFQUNBLGNBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBLEVBQUEsa0NBQUE7QUFDRjs7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSwwQkFBQTtBQUNGOztBQUVBO0VBQ0Usa0JBQUE7RUFDQSxjQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSx5QkFBQTtBQUNGOztBQUVBLHNCQUFBO0FBQ0E7RUFDRTtJQUNFLGFBQUE7RUFDRjtFQUVBO0lBQ0UsYUFBQTtFQUFGO0VBR0E7SUFDRSxlQUFBO0VBREY7RUFJQTtJQUNFLGVBQUE7RUFGRjtBQUNGO0FBS0Esa0JBQUE7QUFDQTtFQUNFLDBDQUFBO0VBQ0EsMkJBQUE7RUFDQSx5QkFBQTtBQUhGOztBQU1BLGtCQUFBO0FBQ0E7RUFDRSxZQUFBO0VBQ0Esb0JBQUE7QUFIRjs7QUFNQTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSx1QkFBQTtFQUNBLHlCQUFBO0VBQ0EsNkJBQUE7RUFDQSxrQkFBQTtFQUNBLGtDQUFBO0FBSEY7O0FBTUE7RUFDRTtJQUFLLHVCQUFBO0VBRkw7RUFHQTtJQUFPLHlCQUFBO0VBQVA7QUFDRlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCIucGFya2luZy1sb3Qtd2lkZ2V0IHtcXG4gIHBhZGRpbmc6IDE2cHg7XFxuICBmb250LWZhbWlseTogJ0F2ZW5pciBOZXh0JywgJ0hlbHZldGljYSBOZXVlJywgQXJpYWwsIHNhbnMtc2VyaWY7XFxufVxcblxcbi53aWRnZXQtaGVhZGVyIHtcXG4gIG1hcmdpbi1ib3R0b206IDE2cHg7XFxufVxcblxcbi53aWRnZXQtaGVhZGVyIGgzIHtcXG4gIG1hcmdpbjogMDtcXG4gIGZvbnQtc2l6ZTogMThweDtcXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XFxuICBjb2xvcjogIzMyMzIzMjtcXG59XFxuXFxuLndpZGdldC1jb250ZW50IHtcXG4gIG1pbi1oZWlnaHQ6IDEwMHB4O1xcbn1cXG5cXG4ucGFya2luZy1sb3QtbGlzdCB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGdhcDogMTJweDtcXG59XFxuXFxuLnBhcmtpbmctbG90LWl0ZW0ge1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICBib3JkZXItcmFkaXVzOiA4cHg7XFxuICBwYWRkaW5nOiAxMHB4IDEycHg7XFxuICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDtcXG59XFxuXFxuLnBhcmtpbmctbG90LWNvbnRlbnQge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBnYXA6IDEycHg7XFxuICBtYXJnaW4tYm90dG9tOiAycHg7XFxufVxcblxcbi51dGlsaXphdGlvbi1kb3Qge1xcbiAgd2lkdGg6IDIwcHg7XFxuICBoZWlnaHQ6IDIwcHg7XFxuICBib3JkZXItcmFkaXVzOiA1MCU7XFxuICBmbGV4LXNocmluazogMDtcXG4gIGJvcmRlcjogMnB4IHNvbGlkIHdoaXRlO1xcbiAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4yKTtcXG59XFxuXFxuLnBhcmtpbmctbG90LW5hbWUge1xcbiAgZm9udC1zaXplOiAxNnB4O1xcbiAgZm9udC13ZWlnaHQ6IDcwMDtcXG4gIGNvbG9yOiAjMzIzMjMyO1xcbiAgbGluZS1oZWlnaHQ6IDEuMztcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbn1cXG5cXG4udXRpbGl6YXRpb24tdGV4dCB7XFxuICBmb250LXNpemU6IDE0cHg7XFxuICBjb2xvcjogIzY2NjY2NjtcXG4gIGZvbnQtd2VpZ2h0OiA0MDA7XFxuICBtYXJnaW4tbGVmdDogMzJweDsgLyogQWxpZ24gd2l0aCB0ZXh0IGFmdGVyIHRoZSBkb3QgKi9cXG59XFxuXFxuLm5vLWRhdGEge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgY29sb3I6ICM5OTk5OTk7XFxuICBmb250LXN0eWxlOiBpdGFsaWM7XFxuICBwYWRkaW5nOiAyMHB4O1xcbiAgYmFja2dyb3VuZDogI2Y4ZjhmODtcXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcXG4gIGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjY2NjO1xcbn1cXG5cXG4ubG9hZGluZyB7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBjb2xvcjogIzY2NjY2NjtcXG4gIHBhZGRpbmc6IDIwcHg7XFxuICBiYWNrZ3JvdW5kOiAjZjhmOGY4O1xcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDtcXG59XFxuXFxuLyogUmVzcG9uc2l2ZSBkZXNpZ24gKi9cXG5AbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcXG4gIC5wYXJraW5nLWxvdC13aWRnZXQge1xcbiAgICBwYWRkaW5nOiAxMnB4O1xcbiAgfVxcbiAgXFxuICAucGFya2luZy1sb3QtaXRlbSB7XFxuICAgIHBhZGRpbmc6IDEwcHg7XFxuICB9XFxuICBcXG4gIC5wYXJraW5nLWxvdC1uYW1lIHtcXG4gICAgZm9udC1zaXplOiAxNHB4O1xcbiAgfVxcbiAgXFxuICAudXRpbGl6YXRpb24tdGV4dCB7XFxuICAgIGZvbnQtc2l6ZTogMTJweDtcXG4gIH1cXG59XFxuXFxuLyogSG92ZXIgZWZmZWN0cyAqL1xcbi5wYXJraW5nLWxvdC1pdGVtOmhvdmVyIHtcXG4gIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcXG4gIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XFxufVxcblxcbi8qIExvYWRpbmcgc3RhdGUgKi9cXG4ucGFya2luZy1sb3Qtd2lkZ2V0LmxvYWRpbmcge1xcbiAgb3BhY2l0eTogMC42O1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxufVxcblxcbi5wYXJraW5nLWxvdC13aWRnZXQubG9hZGluZzo6YWZ0ZXIge1xcbiAgY29udGVudDogJyc7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDUwJTtcXG4gIGxlZnQ6IDUwJTtcXG4gIHdpZHRoOiAyMHB4O1xcbiAgaGVpZ2h0OiAyMHB4O1xcbiAgbWFyZ2luOiAtMTBweCAwIDAgLTEwcHg7XFxuICBib3JkZXI6IDJweCBzb2xpZCAjZjNmM2YzO1xcbiAgYm9yZGVyLXRvcDogMnB4IHNvbGlkICMzNDk4ZGI7XFxuICBib3JkZXItcmFkaXVzOiA1MCU7XFxuICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xcbn1cXG5cXG5Aa2V5ZnJhbWVzIHNwaW4ge1xcbiAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxcbiAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdO1xuXG4gIC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBcIlwiO1xuICAgICAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBpdGVtWzVdICE9PSBcInVuZGVmaW5lZFwiO1xuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgY29udGVudCArPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9O1xuXG4gIC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIGxpc3QuaSA9IGZ1bmN0aW9uIGkobW9kdWxlcywgbWVkaWEsIGRlZHVwZSwgc3VwcG9ydHMsIGxheWVyKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCB1bmRlZmluZWRdXTtcbiAgICB9XG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGlkID0gdGhpc1trXVswXTtcbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IG1vZHVsZXMubGVuZ3RoOyBfaysrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19rXSk7XG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGxheWVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbVs1XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1lZGlhKSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdXBwb3J0cykge1xuICAgICAgICBpZiAoIWl0ZW1bNF0pIHtcbiAgICAgICAgICBpdGVtWzRdID0gXCJcIi5jb25jYXQoc3VwcG9ydHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs0XSA9IHN1cHBvcnRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gbGlzdDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdO1xuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG4gIGlmICh0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNzc01hcHBpbmcpKSkpO1xuICAgIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oXCJcXG5cIik7XG4gIH1cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKFwiXFxuXCIpO1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIHN0eWxlc0luRE9NID0gW107XG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRPTS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRPTVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4QnlJZGVudGlmaWVyID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdLFxuICAgICAgc3VwcG9ydHM6IGl0ZW1bNF0sXG4gICAgICBsYXllcjogaXRlbVs1XVxuICAgIH07XG4gICAgaWYgKGluZGV4QnlJZGVudGlmaWVyICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhCeUlkZW50aWZpZXJdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB1cGRhdGVyID0gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucyk7XG4gICAgICBvcHRpb25zLmJ5SW5kZXggPSBpO1xuICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKGksIDAsIHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogdXBkYXRlcixcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuZnVuY3Rpb24gYWRkRWxlbWVudFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgYXBpID0gb3B0aW9ucy5kb21BUEkob3B0aW9ucyk7XG4gIGFwaS51cGRhdGUob2JqKTtcbiAgdmFyIHVwZGF0ZXIgPSBmdW5jdGlvbiB1cGRhdGVyKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXAgJiYgbmV3T2JqLnN1cHBvcnRzID09PSBvYmouc3VwcG9ydHMgJiYgbmV3T2JqLmxheWVyID09PSBvYmoubGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYXBpLnVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcGkucmVtb3ZlKCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gdXBkYXRlcjtcbn1cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuICAgICAgaWYgKHN0eWxlc0luRE9NW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRPTVtfaW5kZXhdLnVwZGF0ZXIoKTtcbiAgICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBtZW1vID0ge307XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gZ2V0VGFyZ2V0KHRhcmdldCkge1xuICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcblxuICAgIC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG4gICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgfVxuICByZXR1cm4gbWVtb1t0YXJnZXRdO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydEJ5U2VsZWN0b3IoaW5zZXJ0LCBzdHlsZSkge1xuICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGluc2VydCk7XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgfVxuICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRCeVNlbGVjdG9yOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBvcHRpb25zLnNldEF0dHJpYnV0ZXMoZWxlbWVudCwgb3B0aW9ucy5hdHRyaWJ1dGVzKTtcbiAgb3B0aW9ucy5pbnNlcnQoZWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydFN0eWxlRWxlbWVudDsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMoc3R5bGVFbGVtZW50KSB7XG4gIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gXCJ1bmRlZmluZWRcIiA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcbiAgaWYgKG5vbmNlKSB7XG4gICAgc3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IFwiXCI7XG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChvYmouc3VwcG9ydHMsIFwiKSB7XCIpO1xuICB9XG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKTtcbiAgfVxuICB2YXIgbmVlZExheWVyID0gdHlwZW9mIG9iai5sYXllciAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIkBsYXllclwiLmNvbmNhdChvYmoubGF5ZXIubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChvYmoubGF5ZXIpIDogXCJcIiwgXCIge1wiKTtcbiAgfVxuICBjc3MgKz0gb2JqLmNzcztcbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIGlmIChvYmouc3VwcG9ydHMpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG4gIGlmIChzb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfVxuXG4gIC8vIEZvciBvbGQgSUVcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuICBvcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlRWxlbWVudC5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gZG9tQVBJKG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiB7XG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHt9LFxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuICAgIH07XG4gIH1cbiAgdmFyIHN0eWxlRWxlbWVudCA9IG9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9iaikge1xuICAgICAgYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gIH07XG59XG5tb2R1bGUuZXhwb3J0cyA9IGRvbUFQSTsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCkge1xuICBpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gICAgc3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHN0eWxlVGFnVHJhbnNmb3JtOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2FyY2dpc19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5jID0gdW5kZWZpbmVkOyIsIi8qKlxyXG4gKiBXZWJwYWNrIHdpbGwgcmVwbGFjZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB3aXRoIF9fd2VicGFja19yZXF1aXJlX18ucCB0byBzZXQgdGhlIHB1YmxpYyBwYXRoIGR5bmFtaWNhbGx5LlxyXG4gKiBUaGUgcmVhc29uIHdoeSB3ZSBjYW4ndCBzZXQgdGhlIHB1YmxpY1BhdGggaW4gd2VicGFjayBjb25maWcgaXM6IHdlIGNoYW5nZSB0aGUgcHVibGljUGF0aCB3aGVuIGRvd25sb2FkLlxyXG4gKiAqL1xyXG5fX3dlYnBhY2tfcHVibGljX3BhdGhfXyA9IHdpbmRvdy5qaW11Q29uZmlnLmJhc2VVcmxcclxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBSZWFjdCwgdHlwZSBBbGxXaWRnZXRQcm9wcywgRGF0YVNvdXJjZUNvbXBvbmVudCwgdHlwZSBEYXRhU291cmNlLCBqc3gsIEZvcm1hdHRlZE1lc3NhZ2UsIERhdGFTb3VyY2VNYW5hZ2VyLCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgSmltdU1hcFZpZXdDb21wb25lbnQsIHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IHR5cGUgSU1Db25maWcgfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgJy4vc3R5bGUuY3NzJ1xuaW1wb3J0IGRlZmF1bHRJMThuTWVzc2FnZXMgZnJvbSAnLi90cmFuc2xhdGlvbnMvZGVmYXVsdCdcblxuaW50ZXJmYWNlIFBhcmtpbmdMb3REYXRhIHtcbiAgW2tleTogc3RyaW5nXTogYW55XG59XG5cbmNvbnN0IFdpZGdldCA9IChwcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+KSA9PiB7XG4gIGNvbnN0IHsgY29uZmlnLCBpZCwgdXNlRGF0YVNvdXJjZXMsIHVzZU1hcFdpZGdldElkcyB9ID0gcHJvcHNcbiAgY29uc3QgW2ppbXVNYXBWaWV3LCBzZXRKaW11TWFwVmlld10gPSBSZWFjdC51c2VTdGF0ZTxKaW11TWFwVmlldz4obnVsbClcbiAgY29uc3QgW3BhcmtpbmdMb3RMYWJlbHMsIHNldFBhcmtpbmdMb3RMYWJlbHNdID0gUmVhY3QudXNlU3RhdGU8YW55W10+KFtdKVxuICBjb25zdCBbbWFwQ29udGFpbmVyLCBzZXRNYXBDb250YWluZXJdID0gUmVhY3QudXNlU3RhdGU8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IFtsYWJlbHNDcmVhdGVkLCBzZXRMYWJlbHNDcmVhdGVkXSA9IFJlYWN0LnVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKVxuICBjb25zdCBbY3VycmVudFpvb20sIHNldEN1cnJlbnRab29tXSA9IFJlYWN0LnVzZVN0YXRlPG51bWJlcj4oMClcbiAgY29uc3QgbGFiZWxzUmVmID0gUmVhY3QudXNlUmVmPGFueVtdPihbXSlcblxuICAvLyBIYW5kbGUgbWFwIHZpZXcgYWN0aXZhdGlvblxuICBjb25zdCBvbkFjdGl2ZVZpZXdDaGFuZ2UgPSAoam12OiBKaW11TWFwVmlldykgPT4ge1xuICAgIGlmIChqbXYpIHtcbiAgICAgIHNldEppbXVNYXBWaWV3KGptdilcbiAgICAgIFxuICAgICAgLy8gVHJ5IG11bHRpcGxlIHNlbGVjdG9ycyB0byBmaW5kIHRoZSBtYXAgY29udGFpbmVyXG4gICAgICBsZXQgbWFwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7dXNlTWFwV2lkZ2V0SWRzPy5bMF19XCJdIC5tYXAtcm9vdGApXG4gICAgICBcbiAgICAgIGlmICghbWFwRWxlbWVudCkge1xuICAgICAgICAvLyBUcnkgYWx0ZXJuYXRpdmUgc2VsZWN0b3JzXG4gICAgICAgIG1hcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS13aWRnZXQtaWQ9XCIke3VzZU1hcFdpZGdldElkcz8uWzBdfVwiXSAuZXNyaS12aWV3YClcbiAgICAgICAgaWYgKCFtYXBFbGVtZW50KSB7XG4gICAgICAgICAgbWFwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7dXNlTWFwV2lkZ2V0SWRzPy5bMF19XCJdIC5lc3JpLXZpZXctcm9vdGApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtYXBFbGVtZW50KSB7XG4gICAgICAgICAgbWFwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7dXNlTWFwV2lkZ2V0SWRzPy5bMF19XCJdYClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobWFwRWxlbWVudCkge1xuICAgICAgICBzZXRNYXBDb250YWluZXIobWFwRWxlbWVudCBhcyBIVE1MRGl2RWxlbWVudClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZhbGxiYWNrOiB0cnkgdG8gZmluZCBhbnkgbWFwIHZpZXcgZWxlbWVudFxuICAgICAgICBjb25zdCBmYWxsYmFja0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXNyaS12aWV3LXJvb3QnKVxuICAgICAgICBpZiAoZmFsbGJhY2tFbGVtZW50KSB7XG4gICAgICAgICAgc2V0TWFwQ29udGFpbmVyKGZhbGxiYWNrRWxlbWVudCBhcyBIVE1MRGl2RWxlbWVudClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBsYWJlbCBwb3NpdGlvbnMgd2hlbiBtYXAgdmlldyBjaGFuZ2VzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGppbXVNYXBWaWV3ICYmIHBhcmtpbmdMb3RMYWJlbHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdXBkYXRlTGFiZWxQb3NpdGlvbnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHpvb20gPSBqaW11TWFwVmlldy52aWV3Lnpvb21cbiAgICAgICAgc2V0Q3VycmVudFpvb20oem9vbSlcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGF0ZSBzY2FsZSBmYWN0b3IgYmFzZWQgb24gem9vbSBsZXZlbFxuICAgICAgICBjb25zdCBzY2FsZSA9IE1hdGgubWF4KDAuMywgTWF0aC5taW4oMS4wLCAoem9vbSAtIDEwKSAvIDgpKVxuICAgICAgICBcbiAgICAgICAgcGFya2luZ0xvdExhYmVscy5mb3JFYWNoKGxhYmVsID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2NyZWVuUG9pbnQgPSBqaW11TWFwVmlldy52aWV3LnRvU2NyZWVuKGxhYmVsLmdlb21ldHJ5KVxuICAgICAgICAgICAgaWYgKGxhYmVsLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgLy8gQXBwbHkgc2NhbGluZyB3aXRoIHRhaWwgcG9zaXRpb24gYXMgb3JpZ2luICgyMHB4IGZyb20gbGVmdClcbiAgICAgICAgICAgICAgbGFiZWwuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUoJHtzY2FsZX0pYFxuICAgICAgICAgICAgICBsYWJlbC5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICcyMHB4IGJvdHRvbSdcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEdldCB0aGUgZWxlbWVudCBoZWlnaHQgdG8gcG9zaXRpb24gaXQgYWJvdmUgdGhlIHBvaW50XG4gICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRIZWlnaHQgPSBsYWJlbC5lbGVtZW50Lm9mZnNldEhlaWdodCB8fCA2MFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRml4ZWQgb2Zmc2V0IC0gdGFpbCBzaG91bGQgcG9pbnQgdG8gdGhlIGV4YWN0IGNvb3JkaW5hdGVcbiAgICAgICAgICAgICAgbGFiZWwuZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7c2NyZWVuUG9pbnQueCAtIDIwfXB4YFxuICAgICAgICAgICAgICBsYWJlbC5lbGVtZW50LnN0eWxlLnRvcCA9IGAke3NjcmVlblBvaW50LnkgLSBlbGVtZW50SGVpZ2h0IC0gOH1weGBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gU2lsZW50bHkgaGFuZGxlIHBvc2l0aW9uIHVwZGF0ZSBlcnJvcnNcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSBwb3NpdGlvbnMgb24gdmlldyBjaGFuZ2VzXG4gICAgICBqaW11TWFwVmlldy52aWV3LndhdGNoKCdleHRlbnQnLCB1cGRhdGVMYWJlbFBvc2l0aW9ucylcbiAgICAgIGppbXVNYXBWaWV3LnZpZXcud2F0Y2goJ2NlbnRlcicsIHVwZGF0ZUxhYmVsUG9zaXRpb25zKVxuICAgICAgamltdU1hcFZpZXcudmlldy53YXRjaCgnem9vbScsIHVwZGF0ZUxhYmVsUG9zaXRpb25zKVxuICAgICAgXG4gICAgICAvLyBJbml0aWFsIHBvc2l0aW9uIHVwZGF0ZVxuICAgICAgdXBkYXRlTGFiZWxQb3NpdGlvbnMoKVxuICAgIH1cbiAgfSwgW2ppbXVNYXBWaWV3LCBwYXJraW5nTG90TGFiZWxzXSlcblxuICAvLyBDbGVhbiB1cCBsYWJlbHMgd2hlbiB3aWRnZXQgdW5tb3VudHNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcGFya2luZ0xvdExhYmVscy5mb3JFYWNoKGxhYmVsID0+IHtcbiAgICAgICAgaWYgKGxhYmVsLmVsZW1lbnQgJiYgbGFiZWwuZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgbGFiZWwuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxhYmVsLmVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9LCBbcGFya2luZ0xvdExhYmVsc10pXG5cbiAgLy8gUmVzZXQgbGFiZWxzIHdoZW4gZGF0YSBzb3VyY2Ugb3IgY29uZmlnIGNoYW5nZXNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBBbHdheXMgY2xlYXIgYW5kIHJlc2V0IHdoZW4gY29uZmlnIGNoYW5nZXNcbiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgLy8gUmVtb3ZlIGFsbCBsYWJlbHMgZnJvbSBET01cbiAgICAgIGNvbnN0IGFsbExhYmVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYXJraW5nLWxvdC1tYXAtbGFiZWwnKVxuICAgICAgYWxsTGFiZWxzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBpZiAoZWwucGFyZW50Tm9kZSkge1xuICAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIENsZWFyIHN0YXRlXG4gICAgICBzZXRQYXJraW5nTG90TGFiZWxzKFtdKVxuICAgICAgc2V0TGFiZWxzQ3JlYXRlZChmYWxzZSlcbiAgICB9XG4gICAgXG4gICAgY2xlYW51cCgpXG4gIH0sIFt1c2VEYXRhU291cmNlcywgY29uZmlnLnBhcmtpbmdMb3RGaWVsZCwgY29uZmlnLnV0aWxpemF0aW9uRmllbGQsIGNvbmZpZy5zaG93VXRpbGl6YXRpb25UZXh0LCBjb25maWcuYWxsb3dOZWdhdGl2ZXMsIGNvbmZpZy5jb2xvclJhbmdlcywgY29uZmlnLmZ1bGxUaHJlc2hvbGRdKVxuXG4gIGNvbnN0IGdldFV0aWxpemF0aW9uQ29sb3IgPSAocGVyY2VudGFnZTogbnVtYmVyKTogc3RyaW5nID0+IHtcbiAgICAvLyBIYW5kbGUgbmVnYXRpdmUgdmFsdWVzIGJhc2VkIG9uIHNldHRpbmdcbiAgICBsZXQgYWRqdXN0ZWRQZXJjZW50YWdlID0gcGVyY2VudGFnZVxuICAgIGlmICghY29uZmlnLmFsbG93TmVnYXRpdmVzICYmIHBlcmNlbnRhZ2UgPCAwKSB7XG4gICAgICBhZGp1c3RlZFBlcmNlbnRhZ2UgPSAwXG4gICAgfVxuICAgIFxuICAgIC8vIENsYW1wIHBlcmNlbnRhZ2UgdG8gMC0xMDAgcmFuZ2VcbiAgICBhZGp1c3RlZFBlcmNlbnRhZ2UgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIGFkanVzdGVkUGVyY2VudGFnZSkpXG4gICAgXG4gICAgLy8gUm91bmQgdG8gYXZvaWQgZGVjaW1hbCBwcmVjaXNpb24gaXNzdWVzXG4gICAgYWRqdXN0ZWRQZXJjZW50YWdlID0gTWF0aC5yb3VuZChhZGp1c3RlZFBlcmNlbnRhZ2UpXG4gICAgXG4gICAgLy8gU29ydCByYW5nZXMgYnkgbWluVmFsdWUgdG8gZW5zdXJlIGNvcnJlY3QgbWF0Y2hpbmdcbiAgICBjb25zdCBzb3J0ZWRSYW5nZXMgPSBbLi4uY29uZmlnLmNvbG9yUmFuZ2VzXS5zb3J0KChhLCBiKSA9PiBhLm1pblZhbHVlIC0gYi5taW5WYWx1ZSlcbiAgICBcbiAgICAvLyBGaW5kIHRoZSBjb2xvciByYW5nZSB0aGF0IG1hdGNoZXMgdGhlIHBlcmNlbnRhZ2VcbiAgICBjb25zdCBtYXRjaGluZ1JhbmdlID0gc29ydGVkUmFuZ2VzLmZpbmQocmFuZ2UgPT4gXG4gICAgICBhZGp1c3RlZFBlcmNlbnRhZ2UgPj0gcmFuZ2UubWluVmFsdWUgJiYgYWRqdXN0ZWRQZXJjZW50YWdlIDw9IHJhbmdlLm1heFZhbHVlXG4gICAgKVxuICAgIFxuICAgIC8vIElmIHN0aWxsIG5vIG1hdGNoLCBmaW5kIHRoZSBjbG9zZXN0IHJhbmdlXG4gICAgaWYgKCFtYXRjaGluZ1JhbmdlICYmIHNvcnRlZFJhbmdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBGaW5kIHRoZSByYW5nZSB3aXRoIHRoZSBjbG9zZXN0IG1pblZhbHVlXG4gICAgICBjb25zdCBjbG9zZXN0UmFuZ2UgPSBzb3J0ZWRSYW5nZXMucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7XG4gICAgICAgIHJldHVybiBNYXRoLmFicyhjdXJyLm1pblZhbHVlIC0gYWRqdXN0ZWRQZXJjZW50YWdlKSA8IE1hdGguYWJzKHByZXYubWluVmFsdWUgLSBhZGp1c3RlZFBlcmNlbnRhZ2UpIFxuICAgICAgICAgID8gY3VyciBcbiAgICAgICAgICA6IHByZXZcbiAgICAgIH0pXG4gICAgICByZXR1cm4gY2xvc2VzdFJhbmdlLmNvbG9yXG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vIG1hdGNoIGZvdW5kIGF0IGFsbCwgZGVmYXVsdCB0byByZWQgKGhpZ2ggdXRpbGl6YXRpb24pIGZvciBzYWZldHlcbiAgICAvLyBHcmV5IHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIFwiY2xvc2VkXCIgc3RhdHVzIGluIHRoZSBmdXR1cmVcbiAgICByZXR1cm4gbWF0Y2hpbmdSYW5nZSA/IG1hdGNoaW5nUmFuZ2UuY29sb3IgOiAnI0Y0NDMzNidcbiAgfVxuXG4gIGNvbnN0IGdldFV0aWxpemF0aW9uVGV4dCA9IChwZXJjZW50YWdlOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICAgIGxldCBmcmVlUGVyY2VudGFnZSA9IDEwMCAtIHBlcmNlbnRhZ2VcbiAgICBcbiAgICAvLyBIYW5kbGUgbmVnYXRpdmUgdmFsdWVzIGJhc2VkIG9uIHNldHRpbmdcbiAgICBpZiAoIWNvbmZpZy5hbGxvd05lZ2F0aXZlcyAmJiBmcmVlUGVyY2VudGFnZSA8IDApIHtcbiAgICAgIGZyZWVQZXJjZW50YWdlID0gMFxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiBhdmFpbGFiaWxpdHkgaXMgMTAlIG9yIGxlc3MgKHV0aWxpemF0aW9uIDkwJSBvciBtb3JlKVxuICAgIC8vIFNob3cgXCJGdWxsXCIgaW5zdGVhZCBvZiB0aGUgbG93IHBlcmNlbnRhZ2VcbiAgICBpZiAoZnJlZVBlcmNlbnRhZ2UgPD0gMTApIHtcbiAgICAgIHJldHVybiAnRnVsbCdcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGAke01hdGgucm91bmQoZnJlZVBlcmNlbnRhZ2UpfSUgQXZhaWxhYmxlYFxuICB9XG5cbiAgLy8gQ3JlYXRlIGN1c3RvbSBIVE1MIGxhYmVsc1xuICBjb25zdCBjcmVhdGVDdXN0b21MYWJlbHMgPSBhc3luYyAocmVjb3JkczogX19lc3JpLkdyYXBoaWNbXSkgPT4ge1xuICAgIGlmICghbWFwQ29udGFpbmVyIHx8ICFqaW11TWFwVmlldykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gTG9hZCByZXF1aXJlZCBtb2R1bGVzXG4gICAgbGV0IHByb2plY3Rpb24gPSBudWxsXG4gICAgbGV0IFBvaW50ID0gbnVsbFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBtb2R1bGVzID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2VzcmkvZ2VvbWV0cnkvcHJvamVjdGlvbicsICdlc3JpL2dlb21ldHJ5L1BvaW50JywgJ2VzcmkvZ2VvbWV0cnkvU3BhdGlhbFJlZmVyZW5jZSddKVxuICAgICAgcHJvamVjdGlvbiA9IG1vZHVsZXNbMF1cbiAgICAgIFBvaW50ID0gbW9kdWxlc1sxXVxuICAgICAgY29uc3QgU3BhdGlhbFJlZmVyZW5jZSA9IG1vZHVsZXNbMl1cbiAgICAgIFxuICAgICAgYXdhaXQgcHJvamVjdGlvbi5sb2FkKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU2lsZW50bHkgaGFuZGxlIHByb2plY3Rpb24gZXJyb3JzXG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgQUxMIGV4aXN0aW5nIGxhYmVscyBmcm9tIERPTSB1c2luZyByZWZcbiAgICBsYWJlbHNSZWYuY3VycmVudC5mb3JFYWNoKGxhYmVsID0+IHtcbiAgICAgIGlmIChsYWJlbC5lbGVtZW50ICYmIGxhYmVsLmVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICBsYWJlbC5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobGFiZWwuZWxlbWVudClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIEFsc28gcXVlcnkgYW5kIHJlbW92ZSBhbnkgb3JwaGFuZWQgbGFiZWxzXG4gICAgY29uc3Qgb3JwaGFuZWRMYWJlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFya2luZy1sb3QtbWFwLWxhYmVsJylcbiAgICBvcnBoYW5lZExhYmVscy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGlmIChlbC5wYXJlbnROb2RlKSB7XG4gICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICBsYWJlbHNSZWYuY3VycmVudCA9IFtdXG4gICAgc2V0UGFya2luZ0xvdExhYmVscyhbXSlcblxuICAgIGNvbnN0IG5ld0xhYmVsczogYW55W10gPSBbXVxuXG4gICAgZm9yIChjb25zdCByZWNvcmQgb2YgcmVjb3Jkcykge1xuICAgICAgY29uc3QgZGF0YSA9IHJlY29yZC5hdHRyaWJ1dGVzIGFzIFBhcmtpbmdMb3REYXRhXG4gICAgICBjb25zdCBwYXJraW5nTG90TmFtZSA9IGRhdGFbY29uZmlnLnBhcmtpbmdMb3RGaWVsZF1cbiAgICAgIGNvbnN0IHV0aWxpemF0aW9uUGVyY2VudGFnZSA9IGRhdGFbY29uZmlnLnV0aWxpemF0aW9uRmllbGRdXG4gICAgICBsZXQgZ2VvbWV0cnkgPSByZWNvcmQuZ2VvbWV0cnkgYXMgX19lc3JpLlBvaW50XG5cbiAgICAgIGlmICghZ2VvbWV0cnkgfHwgIXBhcmtpbmdMb3ROYW1lKSBjb250aW51ZVxuXG4gICAgICBjb25zdCB1dGlsaXphdGlvbkNvbG9yID0gZ2V0VXRpbGl6YXRpb25Db2xvcihOdW1iZXIodXRpbGl6YXRpb25QZXJjZW50YWdlKSB8fCAwKVxuICAgICAgY29uc3QgdXRpbGl6YXRpb25UZXh0ID0gY29uZmlnLnNob3dVdGlsaXphdGlvblRleHQgPyBnZXRVdGlsaXphdGlvblRleHQoTnVtYmVyKHV0aWxpemF0aW9uUGVyY2VudGFnZSkgfHwgMCkgOiAnJ1xuXG4gICAgICAvLyBQcm9qZWN0IGdlb21ldHJ5IGlmIG5lZWRlZFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWFwU1IgPSBqaW11TWFwVmlldy52aWV3LnNwYXRpYWxSZWZlcmVuY2VcbiAgICAgICAgY29uc3QgZ2VvbVNSID0gZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZVxuICAgICAgICBcbiAgICAgICAgaWYgKHByb2plY3Rpb24gJiYgZ2VvbVNSICYmIG1hcFNSICYmIGdlb21TUi53a2lkICE9PSBtYXBTUi53a2lkKSB7XG4gICAgICAgICAgY29uc3QgcHJvamVjdGVkR2VvbSA9IHByb2plY3Rpb24ucHJvamVjdChnZW9tZXRyeSwgbWFwU1IpXG4gICAgICAgICAgaWYgKHByb2plY3RlZEdlb20pIHtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gcHJvamVjdGVkR2VvbSBhcyBfX2VzcmkuUG9pbnRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIFNpbGVudGx5IGhhbmRsZSBwcm9qZWN0aW9uIGVycm9yc1xuICAgICAgfVxuXG4gICAgICAvLyBDb252ZXJ0IGdlb21ldHJ5IHRvIHNjcmVlbiBjb29yZGluYXRlc1xuICAgICAgbGV0IHNjcmVlblBvaW50XG4gICAgICB0cnkge1xuICAgICAgICBzY3JlZW5Qb2ludCA9IGppbXVNYXBWaWV3LnZpZXcudG9TY3JlZW4oZ2VvbWV0cnkpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb250aW51ZSAvLyBTa2lwIHRoaXMgbGFiZWwgaWYgd2UgY2FuJ3QgY29udmVydCBjb29yZGluYXRlc1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgY3VzdG9tIEhUTUwgbGFiZWwgZWxlbWVudFxuICAgICAgY29uc3QgbGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIGxhYmVsRWxlbWVudC5jbGFzc05hbWUgPSAncGFya2luZy1sb3QtbWFwLWxhYmVsJ1xuICAgICAgbGFiZWxFbGVtZW50LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogJHtzY3JlZW5Qb2ludC54IC0gNTB9cHg7XG4gICAgICAgIHRvcDogJHtzY3JlZW5Qb2ludC55IC0gMzB9cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggOHB4O1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLDAsMCwwLjE1KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2QwZDBkMDtcbiAgICAgICAgZm9udC1mYW1pbHk6ICdBdmVuaXIgTmV4dCcsICdIZWx2ZXRpY2EgTmV1ZScsIEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgICAgICB6LWluZGV4OiAxMDAwO1xuICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICBtaW4td2lkdGg6IDE0MHB4O1xuICAgICAgYFxuICAgICAgXG4gICAgICAvLyBBZGQgc3BlZWNoIGJ1YmJsZSB0YWlsIChtb3ZlZCB0byBsZWZ0IHNpZGUpXG4gICAgICBjb25zdCB0YWlsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICB0YWlsRWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGJvdHRvbTogLThweDtcbiAgICAgICAgbGVmdDogMjBweDtcbiAgICAgICAgd2lkdGg6IDA7XG4gICAgICAgIGhlaWdodDogMDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDhweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiA4cHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgIGJvcmRlci10b3A6IDhweCBzb2xpZCB3aGl0ZTtcbiAgICAgICAgei1pbmRleDogMTAwMTtcbiAgICAgIGBcbiAgICAgIFxuICAgICAgLy8gQWRkIHRhaWwgYm9yZGVyXG4gICAgICBjb25zdCB0YWlsQm9yZGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICB0YWlsQm9yZGVyRWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGJvdHRvbTogLTlweDtcbiAgICAgICAgbGVmdDogMjBweDtcbiAgICAgICAgd2lkdGg6IDA7XG4gICAgICAgIGhlaWdodDogMDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDlweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiA5cHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgIGJvcmRlci10b3A6IDlweCBzb2xpZCAjZDBkMGQwO1xuICAgICAgICB6LWluZGV4OiAxMDAwO1xuICAgICAgYFxuXG4gICAgICAvLyBDcmVhdGUgY29sb3JlZCBkb3QgXG4gICAgICBjb25zdCBkb3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIGRvdEVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICAgIGhlaWdodDogNDBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3V0aWxpemF0aW9uQ29sb3J9O1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIGBcblxuICAgICAgLy8gQ3JlYXRlIHRleHQgY29udGFpbmVyXG4gICAgICBjb25zdCB0ZXh0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIHRleHRDb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiAxcHg7XG4gICAgICBgXG5cbiAgICAgIC8vIENyZWF0ZSB1dGlsaXphdGlvbiB0ZXh0IChmaXJzdCwgc28gaXQgYXBwZWFycyBvbiB0b3AgLSBleHRyYSBib2xkLCBibGFjaywgYmlnKVxuICAgICAgaWYgKGNvbmZpZy5zaG93VXRpbGl6YXRpb25UZXh0KSB7XG4gICAgICAgIGNvbnN0IHV0aWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgdXRpbEVsZW1lbnQudGV4dENvbnRlbnQgPSB1dGlsaXphdGlvblRleHRcbiAgICAgICAgdXRpbEVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgICAgY29sb3I6ICMwMDAwMDA7XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgICAgICAgICBmb250LXdlaWdodDogOTAwO1xuICAgICAgICBgXG4gICAgICAgIHRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQodXRpbEVsZW1lbnQpXG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBwYXJraW5nIGxvdCBuYW1lIChzZWNvbmQsIHNvIGl0IGFwcGVhcnMgYmVsb3cgLSBibGFjaywgYm9sZCwgc2xpZ2h0bHkgbGFyZ2VyKVxuICAgICAgY29uc3QgbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBwYXJraW5nTG90TmFtZVxuICAgICAgbmFtZUVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBmb250LXdlaWdodDogNzAwO1xuICAgICAgICBjb2xvcjogIzAwMDAwMDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuMjtcbiAgICAgIGBcbiAgICAgIHRleHRDb250YWluZXIuYXBwZW5kQ2hpbGQobmFtZUVsZW1lbnQpXG5cbiAgICAgIGxhYmVsRWxlbWVudC5hcHBlbmRDaGlsZChkb3RFbGVtZW50KVxuICAgICAgbGFiZWxFbGVtZW50LmFwcGVuZENoaWxkKHRleHRDb250YWluZXIpXG4gICAgICBcbiAgICAgIC8vIEFkZCB0YWlsIGVsZW1lbnRzXG4gICAgICBsYWJlbEVsZW1lbnQuYXBwZW5kQ2hpbGQodGFpbEJvcmRlckVsZW1lbnQpXG4gICAgICBsYWJlbEVsZW1lbnQuYXBwZW5kQ2hpbGQodGFpbEVsZW1lbnQpXG5cbiAgICAgIC8vIEFkZCB0byBtYXAgY29udGFpbmVyXG4gICAgICBtYXBDb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWxFbGVtZW50KVxuXG4gICAgICAvLyBTdG9yZSBsYWJlbCBpbmZvXG4gICAgICBuZXdMYWJlbHMucHVzaCh7XG4gICAgICAgIGVsZW1lbnQ6IGxhYmVsRWxlbWVudCxcbiAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxuICAgICAgICBkYXRhOiBkYXRhXG4gICAgICB9KVxuICAgIH1cblxuICAgIGxhYmVsc1JlZi5jdXJyZW50ID0gbmV3TGFiZWxzXG4gICAgc2V0UGFya2luZ0xvdExhYmVscyhuZXdMYWJlbHMpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicGFya2luZy1sb3Qtd2lkZ2V0IGppbXUtd2lkZ2V0XCIgZGF0YS13aWRnZXQtaWQ9e2lkfSBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBoZWlnaHQ6ICcxMDAlJywgb3ZlcmZsb3c6ICdoaWRkZW4nLCBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fT5cbiAgICAgIHsvKiBIaWRkZW4gbWFwIHZpZXcgY29tcG9uZW50ICovfVxuICAgICAge3VzZU1hcFdpZGdldElkcyAmJiB1c2VNYXBXaWRnZXRJZHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgIDxKaW11TWFwVmlld0NvbXBvbmVudFxuICAgICAgICAgIHVzZU1hcFdpZGdldElkPXt1c2VNYXBXaWRnZXRJZHNbMF19XG4gICAgICAgICAgb25BY3RpdmVWaWV3Q2hhbmdlPXtvbkFjdGl2ZVZpZXdDaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgICApfVxuXG4gICAgICB7LyogRGF0YSBzb3VyY2UgY29tcG9uZW50IHRvIGxvYWQgYW5kIHVwZGF0ZSBsYWJlbHMgKi99XG4gICAgICB7dXNlRGF0YVNvdXJjZXMgJiYgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCAmJiBtYXBDb250YWluZXIgPyAoXG4gICAgICAgIDxEYXRhU291cmNlQ29tcG9uZW50IFxuICAgICAgICAgIHVzZURhdGFTb3VyY2U9e3VzZURhdGFTb3VyY2VzWzBdfSBcbiAgICAgICAgICB3aWRnZXRJZD17aWR9XG4gICAgICAgICAgcXVlcnk9e3sgcGFnZTogMSwgcGFnZVNpemU6IDEwMDAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIHsoZHM6IERhdGFTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICghZHMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRzLmdldFN0YXR1cygpID09PSAnTE9BREVEJyAmJiAhbGFiZWxzQ3JlYXRlZCkge1xuICAgICAgICAgICAgICBjb25zdCBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgICAgICAgICAgIGNvbnN0IGRhdGFTb3VyY2UgPSBkc01hbmFnZXIuZ2V0RGF0YVNvdXJjZSh1c2VEYXRhU291cmNlc1swXS5kYXRhU291cmNlSWQpXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoZGF0YVNvdXJjZSAmJiBkYXRhU291cmNlLnR5cGUgPT09ICdGRUFUVVJFX0xBWUVSJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlYXR1cmVMYXllckRzID0gZGF0YVNvdXJjZSBhcyBhbnlcbiAgICAgICAgICAgICAgICBjb25zdCBsYXllciA9IGZlYXR1cmVMYXllckRzLmxheWVyXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBtYXAgdG8gYmUgZnVsbHkgbG9hZGVkIGJlZm9yZSBxdWVyeWluZ1xuICAgICAgICAgICAgICAgICAgY29uc3Qgd2FpdEZvck1hcFJlYWR5ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoamltdU1hcFZpZXc/LnZpZXc/LnJlYWR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gUmVzcGVjdCB0aGUgbGF5ZXIncyBkZWZpbml0aW9uIGV4cHJlc3Npb24gKGZyb20gdmlld3MvZmlsdGVycylcbiAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBubyBkZWZpbml0aW9uIGV4cHJlc3Npb24gZXhpc3RzLCB1c2UgJzE9MScgdG8gZ2V0IGFsbCBmZWF0dXJlc1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdoZXJlQ2xhdXNlID0gbGF5ZXIuZGVmaW5pdGlvbkV4cHJlc3Npb24gfHwgJzE9MSdcbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICBsYXllci5xdWVyeUZlYXR1cmVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoZXJlOiB3aGVyZUNsYXVzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dEZpZWxkczogWycqJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5HZW9tZXRyeTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5mZWF0dXJlcyAmJiByZXN1bHQuZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBzbWFsbCBkZWxheSB0byBlbnN1cmUgcHJvamVjdGlvbiBpcyByZWFkeVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVDdXN0b21MYWJlbHMocmVzdWx0LmZlYXR1cmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldExhYmVsc0NyZWF0ZWQodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmV0cnkgYWZ0ZXIgYSBkZWxheSBpZiBwcm9qZWN0aW9uIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3Byb2plY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0Rm9yTWFwUmVhZHkoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCh3YWl0Rm9yTWFwUmVhZHksIDEwMClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB3YWl0Rm9yTWFwUmVhZHkoKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBTaWxlbnRseSBoYW5kbGUgbWlzc2luZyBsYXllclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTaWxlbnRseSBoYW5kbGUgbm9uLWZlYXR1cmUgbGF5ZXJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH19XG4gICAgICAgIDwvRGF0YVNvdXJjZUNvbXBvbmVudD5cbiAgICAgICkgOiBudWxsfVxuXG4gICAgICB7LyogTGVnZW5kIC0gU3RhdGljIHBvc2l0aW9uIGluIGJvdHRvbSByaWdodCAqL31cbiAgICAgIHt1c2VNYXBXaWRnZXRJZHMgJiYgdXNlTWFwV2lkZ2V0SWRzLmxlbmd0aCA+IDAgJiYgdXNlRGF0YVNvdXJjZXMgJiYgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgIDxkaXYgc3R5bGU9e3tcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICBib3R0b206ICcyMHB4JyxcbiAgICAgICAgICByaWdodDogJzIwcHgnLFxuICAgICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpJyxcbiAgICAgICAgICBib3JkZXJSYWRpdXM6ICc4cHgnLFxuICAgICAgICAgIHBhZGRpbmc6ICcxNnB4IDIwcHgnLFxuICAgICAgICAgIGJveFNoYWRvdzogJzAgMnB4IDhweCByZ2JhKDAsMCwwLDAuMiknLFxuICAgICAgICAgIHpJbmRleDogMjAwMCxcbiAgICAgICAgICBtaW5XaWR0aDogJzE2MHB4J1xuICAgICAgICB9fT5cbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7XG4gICAgICAgICAgICBmb250U2l6ZTogJzE2cHgnLFxuICAgICAgICAgICAgZm9udFdlaWdodDogJ2JvbGQnLFxuICAgICAgICAgICAgY29sb3I6ICcjMDAwMDAwJyxcbiAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzEycHgnLFxuICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBdmVuaXIgTmV4dCwgSGVsdmV0aWNhIE5ldWUsIEFyaWFsLCBzYW5zLXNlcmlmJ1xuICAgICAgICAgIH19PlxuICAgICAgICAgICAgQXZhaWxhYmlsaXR5IEd1aWRlXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgey8qIEhpZ2ggQXZhaWxhYmlsaXR5ICovfVxuICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMTBweCcsIG1hcmdpbkJvdHRvbTogJzhweCcgfX0+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7XG4gICAgICAgICAgICAgIHdpZHRoOiAnMTZweCcsXG4gICAgICAgICAgICAgIGhlaWdodDogJzE2cHgnLFxuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjNENBRjUwJyxcbiAgICAgICAgICAgICAgZmxleFNocmluazogMFxuICAgICAgICAgICAgfX0+PC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBcbiAgICAgICAgICAgICAgZm9udFNpemU6ICcxNHB4JywgXG4gICAgICAgICAgICAgIGNvbG9yOiAnIzAwMDAwMCcsXG4gICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBdmVuaXIgTmV4dCwgSGVsdmV0aWNhIE5ldWUsIEFyaWFsLCBzYW5zLXNlcmlmJ1xuICAgICAgICAgICAgfX0+SGlnaDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICB7LyogTWVkaXVtIEF2YWlsYWJpbGl0eSAqL31cbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzEwcHgnLCBtYXJnaW5Cb3R0b206ICc4cHgnIH19PlxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e1xuICAgICAgICAgICAgICB3aWR0aDogJzE2cHgnLFxuICAgICAgICAgICAgICBoZWlnaHQ6ICcxNnB4JyxcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNTAlJyxcbiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0ZGQzEwNycsXG4gICAgICAgICAgICAgIGZsZXhTaHJpbms6IDBcbiAgICAgICAgICAgIH19PjwvZGl2PlxuICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3sgXG4gICAgICAgICAgICAgIGZvbnRTaXplOiAnMTRweCcsIFxuICAgICAgICAgICAgICBjb2xvcjogJyMwMDAwMDAnLFxuICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXZlbmlyIE5leHQsIEhlbHZldGljYSBOZXVlLCBBcmlhbCwgc2Fucy1zZXJpZidcbiAgICAgICAgICAgIH19Pk1lZGl1bTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICB7LyogTG93IG9yIEZ1bGwgKi99XG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcxMHB4JywgbWFyZ2luQm90dG9tOiAnOHB4JyB9fT5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tcbiAgICAgICAgICAgICAgd2lkdGg6ICcxNnB4JyxcbiAgICAgICAgICAgICAgaGVpZ2h0OiAnMTZweCcsXG4gICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzUwJScsXG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNGNDQzMzYnLFxuICAgICAgICAgICAgICBmbGV4U2hyaW5rOiAwXG4gICAgICAgICAgICB9fT48L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IFxuICAgICAgICAgICAgICBmb250U2l6ZTogJzE0cHgnLCBcbiAgICAgICAgICAgICAgY29sb3I6ICcjMDAwMDAwJyxcbiAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0F2ZW5pciBOZXh0LCBIZWx2ZXRpY2EgTmV1ZSwgQXJpYWwsIHNhbnMtc2VyaWYnXG4gICAgICAgICAgICB9fT5Mb3cgb3IgRnVsbDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICB7LyogQ2xvc2VkICovfVxuICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMTBweCcgfX0+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7XG4gICAgICAgICAgICAgIHdpZHRoOiAnMTZweCcsXG4gICAgICAgICAgICAgIGhlaWdodDogJzE2cHgnLFxuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjNjY2NjY2JyxcbiAgICAgICAgICAgICAgZmxleFNocmluazogMFxuICAgICAgICAgICAgfX0+PC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBcbiAgICAgICAgICAgICAgZm9udFNpemU6ICcxNHB4JywgXG4gICAgICAgICAgICAgIGNvbG9yOiAnIzAwMDAwMCcsXG4gICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBdmVuaXIgTmV4dCwgSGVsdmV0aWNhIE5ldWUsIEFyaWFsLCBzYW5zLXNlcmlmJ1xuICAgICAgICAgICAgfX0+Q2xvc2VkPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBTdGF0dXMgbWVzc2FnZXMgKi99XG4gICAgICB7IXVzZU1hcFdpZGdldElkcyB8fCB1c2VNYXBXaWRnZXRJZHMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5vLWRhdGFcIj5cbiAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInNlbGVjdE1hcFwiIGRlZmF1bHRNZXNzYWdlPVwiUGxlYXNlIHNlbGVjdCBhIG1hcCB3aWRnZXQgaW4gdGhlIHNldHRpbmdzXCIvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICkgOiAhdXNlRGF0YVNvdXJjZXMgfHwgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5vLWRhdGFcIj5cbiAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbmZpZ3VyZURhdGFTb3VyY2VcIiBkZWZhdWx0TWVzc2FnZT17ZGVmYXVsdEkxOG5NZXNzYWdlcy5jb25maWd1cmVEYXRhU291cmNlfS8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKSA6IG51bGx9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgV2lkZ2V0XG5cbiBleHBvcnQgZnVuY3Rpb24gX19zZXRfd2VicGFja19wdWJsaWNfcGF0aF9fKHVybCkgeyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyA9IHVybCB9Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9