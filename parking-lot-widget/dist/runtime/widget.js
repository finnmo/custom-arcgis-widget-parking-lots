System.register(["jimu-core","jimu-arcgis"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./finn/widgets/parking-lot-widget/src/runtime/style.css":
/*!***************************************************************!*\
  !*** ./finn/widgets/parking-lot-widget/src/runtime/style.css ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_node_modules_resolve_url_loader_index_js_ruleSet_1_rules_3_use_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_3_use_3_style_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!../../../../../node_modules/resolve-url-loader/index.js??ruleSet[1].rules[3].use[2]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[3]!./style.css */ "./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/resolve-url-loader/index.js??ruleSet[1].rules[3].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[3]!./finn/widgets/parking-lot-widget/src/runtime/style.css");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());
options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_node_modules_resolve_url_loader_index_js_ruleSet_1_rules_3_use_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_3_use_3_style_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_node_modules_resolve_url_loader_index_js_ruleSet_1_rules_3_use_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_3_use_3_style_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_node_modules_resolve_url_loader_index_js_ruleSet_1_rules_3_use_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_3_use_3_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_node_modules_resolve_url_loader_index_js_ruleSet_1_rules_3_use_2_node_modules_sass_loader_dist_cjs_js_ruleSet_1_rules_3_use_3_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./finn/widgets/parking-lot-widget/src/runtime/translations/default.ts":
/*!*****************************************************************************!*\
  !*** ./finn/widgets/parking-lot-widget/src/runtime/translations/default.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'Parking Lot Widget',
    parkingLotStatus: 'Parking Lot Status',
    noDataSource: 'No data source configured',
    loadingData: 'Loading parking lot data...',
    errorLoadingData: 'Error loading data source',
    noDataAvailable: 'No parking lot data available',
    configureDataSource: 'Please configure a data source in the widget settings'
});


/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/resolve-url-loader/index.js??ruleSet[1].rules[3].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[3]!./finn/widgets/parking-lot-widget/src/runtime/style.css":
/*!***************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/resolve-url-loader/index.js??ruleSet[1].rules[3].use[2]!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[3]!./finn/widgets/parking-lot-widget/src/runtime/style.css ***!
  \***************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, `.parking-lot-widget {
  padding: 16px;
  font-family: "Avenir Next", "Helvetica Neue", Arial, sans-serif;
}

.widget-header {
  margin-bottom: 16px;
}

.widget-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: #323232;
}

.widget-content {
  min-height: 100px;
}

.parking-lot-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.parking-lot-item {
  background: white;
  border-radius: 8px;
  padding: 10px 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border: 1px solid #e0e0e0;
}

.parking-lot-content {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 2px;
}

.utilization-dot {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  flex-shrink: 0;
  border: 2px solid white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.parking-lot-name {
  font-size: 16px;
  font-weight: 700;
  color: #323232;
  line-height: 1.3;
  display: flex;
  align-items: center;
}

.utilization-text {
  font-size: 14px;
  color: #666666;
  font-weight: 400;
  margin-left: 32px; /* Align with text after the dot */
}

.no-data {
  text-align: center;
  color: #999999;
  font-style: italic;
  padding: 20px;
  background: #f8f8f8;
  border-radius: 8px;
  border: 1px dashed #cccccc;
}

.loading {
  text-align: center;
  color: #666666;
  padding: 20px;
  background: #f8f8f8;
  border-radius: 8px;
  border: 1px solid #e0e0e0;
}

/* Responsive design */
@media (max-width: 480px) {
  .parking-lot-widget {
    padding: 12px;
  }
  .parking-lot-item {
    padding: 10px;
  }
  .parking-lot-name {
    font-size: 14px;
  }
  .utilization-text {
    font-size: 12px;
  }
}
/* Hover effects */
.parking-lot-item:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transform: translateY(-1px);
  transition: all 0.2s ease;
}

/* Loading state */
.parking-lot-widget.loading {
  opacity: 0.6;
  pointer-events: none;
}

.parking-lot-widget.loading::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid #f3f3f3;
  border-top: 2px solid #3498db;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}`, "",{"version":3,"sources":["webpack://./finn/widgets/parking-lot-widget/src/runtime/style.css"],"names":[],"mappings":"AAAA;EACE,aAAA;EACA,+DAAA;AACF;;AAEA;EACE,mBAAA;AACF;;AAEA;EACE,SAAA;EACA,eAAA;EACA,gBAAA;EACA,cAAA;AACF;;AAEA;EACE,iBAAA;AACF;;AAEA;EACE,aAAA;EACA,sBAAA;EACA,SAAA;AACF;;AAEA;EACE,iBAAA;EACA,kBAAA;EACA,kBAAA;EACA,wCAAA;EACA,yBAAA;AACF;;AAEA;EACE,aAAA;EACA,mBAAA;EACA,SAAA;EACA,kBAAA;AACF;;AAEA;EACE,WAAA;EACA,YAAA;EACA,kBAAA;EACA,cAAA;EACA,uBAAA;EACA,wCAAA;AACF;;AAEA;EACE,eAAA;EACA,gBAAA;EACA,cAAA;EACA,gBAAA;EACA,aAAA;EACA,mBAAA;AACF;;AAEA;EACE,eAAA;EACA,cAAA;EACA,gBAAA;EACA,iBAAA,EAAA,kCAAA;AACF;;AAEA;EACE,kBAAA;EACA,cAAA;EACA,kBAAA;EACA,aAAA;EACA,mBAAA;EACA,kBAAA;EACA,0BAAA;AACF;;AAEA;EACE,kBAAA;EACA,cAAA;EACA,aAAA;EACA,mBAAA;EACA,kBAAA;EACA,yBAAA;AACF;;AAEA,sBAAA;AACA;EACE;IACE,aAAA;EACF;EAEA;IACE,aAAA;EAAF;EAGA;IACE,eAAA;EADF;EAIA;IACE,eAAA;EAFF;AACF;AAKA,kBAAA;AACA;EACE,0CAAA;EACA,2BAAA;EACA,yBAAA;AAHF;;AAMA,kBAAA;AACA;EACE,YAAA;EACA,oBAAA;AAHF;;AAMA;EACE,WAAA;EACA,kBAAA;EACA,QAAA;EACA,SAAA;EACA,WAAA;EACA,YAAA;EACA,uBAAA;EACA,yBAAA;EACA,6BAAA;EACA,kBAAA;EACA,kCAAA;AAHF;;AAMA;EACE;IAAK,uBAAA;EAFL;EAGA;IAAO,yBAAA;EAAP;AACF","sourcesContent":[".parking-lot-widget {\n  padding: 16px;\n  font-family: 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;\n}\n\n.widget-header {\n  margin-bottom: 16px;\n}\n\n.widget-header h3 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #323232;\n}\n\n.widget-content {\n  min-height: 100px;\n}\n\n.parking-lot-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.parking-lot-item {\n  background: white;\n  border-radius: 8px;\n  padding: 10px 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e0e0e0;\n}\n\n.parking-lot-content {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 2px;\n}\n\n.utilization-dot {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  flex-shrink: 0;\n  border: 2px solid white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n\n.parking-lot-name {\n  font-size: 16px;\n  font-weight: 700;\n  color: #323232;\n  line-height: 1.3;\n  display: flex;\n  align-items: center;\n}\n\n.utilization-text {\n  font-size: 14px;\n  color: #666666;\n  font-weight: 400;\n  margin-left: 32px; /* Align with text after the dot */\n}\n\n.no-data {\n  text-align: center;\n  color: #999999;\n  font-style: italic;\n  padding: 20px;\n  background: #f8f8f8;\n  border-radius: 8px;\n  border: 1px dashed #cccccc;\n}\n\n.loading {\n  text-align: center;\n  color: #666666;\n  padding: 20px;\n  background: #f8f8f8;\n  border-radius: 8px;\n  border: 1px solid #e0e0e0;\n}\n\n/* Responsive design */\n@media (max-width: 480px) {\n  .parking-lot-widget {\n    padding: 12px;\n  }\n  \n  .parking-lot-item {\n    padding: 10px;\n  }\n  \n  .parking-lot-name {\n    font-size: 14px;\n  }\n  \n  .utilization-text {\n    font-size: 12px;\n  }\n}\n\n/* Hover effects */\n.parking-lot-item:hover {\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  transform: translateY(-1px);\n  transition: all 0.2s ease;\n}\n\n/* Loading state */\n.parking-lot-widget.loading {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.parking-lot-widget.loading::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 20px;\n  height: 20px;\n  margin: -10px 0 0 -10px;\n  border: 2px solid #f3f3f3;\n  border-top: 2px solid #3498db;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
module.exports = function (cssWithMappingToString) {
  var list = [];

  // return the list of modules as css string
  list.toString = function toString() {
    return this.map(function (item) {
      var content = "";
      var needLayer = typeof item[5] !== "undefined";
      if (item[4]) {
        content += "@supports (".concat(item[4], ") {");
      }
      if (item[2]) {
        content += "@media ".concat(item[2], " {");
      }
      if (needLayer) {
        content += "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {");
      }
      content += cssWithMappingToString(item);
      if (needLayer) {
        content += "}";
      }
      if (item[2]) {
        content += "}";
      }
      if (item[4]) {
        content += "}";
      }
      return content;
    }).join("");
  };

  // import a list of modules into the list
  list.i = function i(modules, media, dedupe, supports, layer) {
    if (typeof modules === "string") {
      modules = [[null, modules, undefined]];
    }
    var alreadyImportedModules = {};
    if (dedupe) {
      for (var k = 0; k < this.length; k++) {
        var id = this[k][0];
        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }
    for (var _k = 0; _k < modules.length; _k++) {
      var item = [].concat(modules[_k]);
      if (dedupe && alreadyImportedModules[item[0]]) {
        continue;
      }
      if (typeof layer !== "undefined") {
        if (typeof item[5] === "undefined") {
          item[5] = layer;
        } else {
          item[1] = "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {").concat(item[1], "}");
          item[5] = layer;
        }
      }
      if (media) {
        if (!item[2]) {
          item[2] = media;
        } else {
          item[1] = "@media ".concat(item[2], " {").concat(item[1], "}");
          item[2] = media;
        }
      }
      if (supports) {
        if (!item[4]) {
          item[4] = "".concat(supports);
        } else {
          item[1] = "@supports (".concat(item[4], ") {").concat(item[1], "}");
          item[4] = supports;
        }
      }
      list.push(item);
    }
  };
  return list;
};

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/sourceMaps.js":
/*!************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/sourceMaps.js ***!
  \************************************************************/
/***/ ((module) => {

"use strict";


module.exports = function (item) {
  var content = item[1];
  var cssMapping = item[3];
  if (!cssMapping) {
    return content;
  }
  if (typeof btoa === "function") {
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    return [content].concat([sourceMapping]).join("\n");
  }
  return [content].join("\n");
};

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {

"use strict";


var stylesInDOM = [];
function getIndexByIdentifier(identifier) {
  var result = -1;
  for (var i = 0; i < stylesInDOM.length; i++) {
    if (stylesInDOM[i].identifier === identifier) {
      result = i;
      break;
    }
  }
  return result;
}
function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];
  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var indexByIdentifier = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3],
      supports: item[4],
      layer: item[5]
    };
    if (indexByIdentifier !== -1) {
      stylesInDOM[indexByIdentifier].references++;
      stylesInDOM[indexByIdentifier].updater(obj);
    } else {
      var updater = addElementStyle(obj, options);
      options.byIndex = i;
      stylesInDOM.splice(i, 0, {
        identifier: identifier,
        updater: updater,
        references: 1
      });
    }
    identifiers.push(identifier);
  }
  return identifiers;
}
function addElementStyle(obj, options) {
  var api = options.domAPI(options);
  api.update(obj);
  var updater = function updater(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {
        return;
      }
      api.update(obj = newObj);
    } else {
      api.remove();
    }
  };
  return updater;
}
module.exports = function (list, options) {
  options = options || {};
  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];
    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDOM[index].references--;
    }
    var newLastIdentifiers = modulesToDom(newList, options);
    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];
      var _index = getIndexByIdentifier(_identifier);
      if (stylesInDOM[_index].references === 0) {
        stylesInDOM[_index].updater();
        stylesInDOM.splice(_index, 1);
      }
    }
    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {

"use strict";


var memo = {};

/* istanbul ignore next  */
function getTarget(target) {
  if (typeof memo[target] === "undefined") {
    var styleTarget = document.querySelector(target);

    // Special case to return head of iframe instead of iframe itself
    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
      try {
        // This will throw an exception if access to iframe is blocked
        // due to cross-origin restrictions
        styleTarget = styleTarget.contentDocument.head;
      } catch (e) {
        // istanbul ignore next
        styleTarget = null;
      }
    }
    memo[target] = styleTarget;
  }
  return memo[target];
}

/* istanbul ignore next  */
function insertBySelector(insert, style) {
  var target = getTarget(insert);
  if (!target) {
    throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
  }
  target.appendChild(style);
}
module.exports = insertBySelector;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";


/* istanbul ignore next  */
function insertStyleElement(options) {
  var element = document.createElement("style");
  options.setAttributes(element, options.attributes);
  options.insert(element, options.options);
  return element;
}
module.exports = insertStyleElement;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


/* istanbul ignore next  */
function setAttributesWithoutAttributes(styleElement) {
  var nonce =  true ? __webpack_require__.nc : 0;
  if (nonce) {
    styleElement.setAttribute("nonce", nonce);
  }
}
module.exports = setAttributesWithoutAttributes;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {

"use strict";


/* istanbul ignore next  */
function apply(styleElement, options, obj) {
  var css = "";
  if (obj.supports) {
    css += "@supports (".concat(obj.supports, ") {");
  }
  if (obj.media) {
    css += "@media ".concat(obj.media, " {");
  }
  var needLayer = typeof obj.layer !== "undefined";
  if (needLayer) {
    css += "@layer".concat(obj.layer.length > 0 ? " ".concat(obj.layer) : "", " {");
  }
  css += obj.css;
  if (needLayer) {
    css += "}";
  }
  if (obj.media) {
    css += "}";
  }
  if (obj.supports) {
    css += "}";
  }
  var sourceMap = obj.sourceMap;
  if (sourceMap && typeof btoa !== "undefined") {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  }

  // For old IE
  /* istanbul ignore if  */
  options.styleTagTransform(css, styleElement, options.options);
}
function removeStyleElement(styleElement) {
  // istanbul ignore if
  if (styleElement.parentNode === null) {
    return false;
  }
  styleElement.parentNode.removeChild(styleElement);
}

/* istanbul ignore next  */
function domAPI(options) {
  if (typeof document === "undefined") {
    return {
      update: function update() {},
      remove: function remove() {}
    };
  }
  var styleElement = options.insertStyleElement(options);
  return {
    update: function update(obj) {
      apply(styleElement, options, obj);
    },
    remove: function remove() {
      removeStyleElement(styleElement);
    }
  };
}
module.exports = domAPI;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";


/* istanbul ignore next  */
function styleTagTransform(css, styleElement) {
  if (styleElement.styleSheet) {
    styleElement.styleSheet.cssText = css;
  } else {
    while (styleElement.firstChild) {
      styleElement.removeChild(styleElement.firstChild);
    }
    styleElement.appendChild(document.createTextNode(css));
  }
}
module.exports = styleTagTransform;

/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/*!****************************************************************!*\
  !*** ./finn/widgets/parking-lot-widget/src/runtime/widget.tsx ***!
  \****************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./style.css */ "./finn/widgets/parking-lot-widget/src/runtime/style.css");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./translations/default */ "./finn/widgets/parking-lot-widget/src/runtime/translations/default.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/** @jsx jsx */




const Widget = (props) => {
    const { config, id, useDataSources, useMapWidgetIds } = props;
    const [jimuMapView, setJimuMapView] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(null);
    const [parkingLotLabels, setParkingLotLabels] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState([]);
    const [mapContainer, setMapContainer] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(null);
    const [labelsCreated, setLabelsCreated] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(false);
    const [currentZoom, setCurrentZoom] = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useState(0);
    const labelsRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef([]);
    const legendRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useRef(null);
    // Handle map view activation
    const onActiveViewChange = (jmv) => {
        if (jmv) {
            setJimuMapView(jmv);
            // Try multiple selectors to find the map container
            let mapElement = document.querySelector(`[data-widget-id="${useMapWidgetIds === null || useMapWidgetIds === void 0 ? void 0 : useMapWidgetIds[0]}"] .map-root`);
            if (!mapElement) {
                // Try alternative selectors
                mapElement = document.querySelector(`[data-widget-id="${useMapWidgetIds === null || useMapWidgetIds === void 0 ? void 0 : useMapWidgetIds[0]}"] .esri-view`);
                if (!mapElement) {
                    mapElement = document.querySelector(`[data-widget-id="${useMapWidgetIds === null || useMapWidgetIds === void 0 ? void 0 : useMapWidgetIds[0]}"] .esri-view-root`);
                }
                if (!mapElement) {
                    mapElement = document.querySelector(`[data-widget-id="${useMapWidgetIds === null || useMapWidgetIds === void 0 ? void 0 : useMapWidgetIds[0]}"]`);
                }
            }
            if (mapElement) {
                setMapContainer(mapElement);
            }
            else {
                // Fallback: try to find any map view element
                const fallbackElement = document.querySelector('.esri-view-root');
                if (fallbackElement) {
                    setMapContainer(fallbackElement);
                }
            }
        }
    };
    // Update label positions when map view changes
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        if (jimuMapView && parkingLotLabels.length > 0) {
            const updateLabelPositions = () => {
                const zoom = jimuMapView.view.zoom;
                setCurrentZoom(zoom);
                // Calculate scale factor based on zoom level
                const scale = Math.max(0.3, Math.min(1.0, (zoom - 10) / 8));
                parkingLotLabels.forEach(label => {
                    try {
                        const screenPoint = jimuMapView.view.toScreen(label.geometry);
                        if (label.element) {
                            // Apply scaling with tail position as origin (20px from left)
                            label.element.style.transform = `scale(${scale})`;
                            label.element.style.transformOrigin = '20px bottom';
                            // Get the element height to position it above the point
                            const elementHeight = label.element.offsetHeight || 60;
                            // Fixed offset - tail should point to the exact coordinate
                            label.element.style.left = `${screenPoint.x - 20}px`;
                            label.element.style.top = `${screenPoint.y - elementHeight - 8}px`;
                        }
                    }
                    catch (error) {
                        // Silently handle position update errors
                    }
                });
            };
            // Update positions on view changes
            jimuMapView.view.watch('extent', updateLabelPositions);
            jimuMapView.view.watch('center', updateLabelPositions);
            jimuMapView.view.watch('zoom', updateLabelPositions);
            // Initial position update
            updateLabelPositions();
        }
    }, [jimuMapView, parkingLotLabels]);
    // Clean up labels when widget unmounts
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        return () => {
            parkingLotLabels.forEach(label => {
                if (label.element && label.element.parentNode) {
                    label.element.parentNode.removeChild(label.element);
                }
            });
        };
    }, [parkingLotLabels]);
    // Reset labels when data source or config changes
    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.useEffect(() => {
        // Always clear and reset when config changes
        const cleanup = () => {
            // Remove all labels from DOM
            const allLabels = document.querySelectorAll('.parking-lot-map-label');
            allLabels.forEach(el => {
                if (el.parentNode) {
                    el.parentNode.removeChild(el);
                }
            });
            // Remove legend
            if (legendRef.current && legendRef.current.parentNode) {
                legendRef.current.parentNode.removeChild(legendRef.current);
                legendRef.current = null;
            }
            // Clear state
            setParkingLotLabels([]);
            setLabelsCreated(false);
        };
        cleanup();
    }, [useDataSources, config.parkingLotField, config.utilizationField, config.showUtilizationText, config.allowNegatives, config.colorRanges, config.fullThreshold]);
    const getUtilizationColor = (percentage) => {
        // Handle negative values based on setting
        let adjustedPercentage = percentage;
        if (!config.allowNegatives && percentage < 0) {
            adjustedPercentage = 0;
        }
        // Clamp percentage to 0-100 range
        adjustedPercentage = Math.max(0, Math.min(100, adjustedPercentage));
        // Round to avoid decimal precision issues
        adjustedPercentage = Math.round(adjustedPercentage);
        // Sort ranges by minValue to ensure correct matching
        const sortedRanges = [...config.colorRanges].sort((a, b) => a.minValue - b.minValue);
        // Find the color range that matches the percentage
        const matchingRange = sortedRanges.find(range => adjustedPercentage >= range.minValue && adjustedPercentage <= range.maxValue);
        // If still no match, find the closest range
        if (!matchingRange && sortedRanges.length > 0) {
            // Find the range with the closest minValue
            const closestRange = sortedRanges.reduce((prev, curr) => {
                return Math.abs(curr.minValue - adjustedPercentage) < Math.abs(prev.minValue - adjustedPercentage)
                    ? curr
                    : prev;
            });
            return closestRange.color;
        }
        // If no match found at all, default to red (high utilization) for safety
        // Grey should only be used for "closed" status in the future
        return matchingRange ? matchingRange.color : '#F44336';
    };
    const getUtilizationText = (percentage) => {
        let freePercentage = 100 - percentage;
        // Handle negative values based on setting
        if (!config.allowNegatives && freePercentage < 0) {
            freePercentage = 0;
        }
        // Check if availability is 10% or less (utilization 90% or more)
        // Show "Full" instead of the low percentage
        if (freePercentage <= 10) {
            return 'Full';
        }
        return `${Math.round(freePercentage)}% Available`;
    };
    // Create legend element
    const createLegend = () => {
        if (!mapContainer || legendRef.current) {
            return; // Already exists or no container
        }
        const legendElement = document.createElement('div');
        legendElement.className = 'parking-lot-legend';
        legendElement.style.cssText = `
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.75);
      border-radius: 8px;
      padding: 16px 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      z-index: 10000;
      min-width: 160px;
      pointer-events: auto;
    `;
        legendElement.innerHTML = `
      <div style="font-size: 16px; font-weight: bold; color: #000000; margin-bottom: 12px; text-align: center; font-family: 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;">
        Availability Guide
      </div>
      <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
        <div style="width: 16px; height: 16px; border-radius: 50%; background-color: #4CAF50; flex-shrink: 0;"></div>
        <span style="font-size: 14px; color: #000000; font-family: 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;">High</span>
      </div>
      <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
        <div style="width: 16px; height: 16px; border-radius: 50%; background-color: #FFC107; flex-shrink: 0;"></div>
        <span style="font-size: 14px; color: #000000; font-family: 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;">Medium</span>
      </div>
      <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
        <div style="width: 16px; height: 16px; border-radius: 50%; background-color: #F44336; flex-shrink: 0;"></div>
        <span style="font-size: 14px; color: #000000; font-family: 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;">Low or Full</span>
      </div>
      <div style="display: flex; align-items: center; gap: 10px;">
        <div style="width: 16px; height: 16px; border-radius: 50%; background-color: #666666; flex-shrink: 0;"></div>
        <span style="font-size: 14px; color: #000000; font-family: 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;">Closed</span>
      </div>
    `;
        mapContainer.appendChild(legendElement);
        legendRef.current = legendElement;
    };
    // Create custom HTML labels
    const createCustomLabels = (records) => __awaiter(void 0, void 0, void 0, function* () {
        if (!mapContainer || !jimuMapView) {
            return;
        }
        // Create legend if it doesn't exist
        createLegend();
        // Load required modules
        let projection = null;
        let Point = null;
        try {
            const modules = yield (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.loadArcGISJSAPIModules)(['esri/geometry/projection', 'esri/geometry/Point', 'esri/geometry/SpatialReference']);
            projection = modules[0];
            Point = modules[1];
            const SpatialReference = modules[2];
            yield projection.load();
        }
        catch (error) {
            // Silently handle projection errors
        }
        // Clear ALL existing labels from DOM using ref
        labelsRef.current.forEach(label => {
            if (label.element && label.element.parentNode) {
                label.element.parentNode.removeChild(label.element);
            }
        });
        // Also query and remove any orphaned labels
        const orphanedLabels = document.querySelectorAll('.parking-lot-map-label');
        orphanedLabels.forEach(el => {
            if (el.parentNode) {
                el.parentNode.removeChild(el);
            }
        });
        labelsRef.current = [];
        setParkingLotLabels([]);
        const newLabels = [];
        for (const record of records) {
            const data = record.attributes;
            const parkingLotName = data[config.parkingLotField];
            const utilizationPercentage = data[config.utilizationField];
            let geometry = record.geometry;
            if (!geometry || !parkingLotName)
                continue;
            const utilizationColor = getUtilizationColor(Number(utilizationPercentage) || 0);
            const utilizationText = config.showUtilizationText ? getUtilizationText(Number(utilizationPercentage) || 0) : '';
            // Project geometry if needed
            try {
                const mapSR = jimuMapView.view.spatialReference;
                const geomSR = geometry.spatialReference;
                if (projection && geomSR && mapSR && geomSR.wkid !== mapSR.wkid) {
                    const projectedGeom = projection.project(geometry, mapSR);
                    if (projectedGeom) {
                        geometry = projectedGeom;
                    }
                }
            }
            catch (error) {
                // Silently handle projection errors
            }
            // Convert geometry to screen coordinates
            let screenPoint;
            try {
                screenPoint = jimuMapView.view.toScreen(geometry);
            }
            catch (error) {
                continue; // Skip this label if we can't convert coordinates
            }
            // Create custom HTML label element
            const labelElement = document.createElement('div');
            labelElement.className = 'parking-lot-map-label';
            labelElement.style.cssText = `
        position: absolute;
        left: ${screenPoint.x - 50}px;
        top: ${screenPoint.y - 30}px;
        background: white;
        border-radius: 12px;
        padding: 8px 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        border: 1px solid #d0d0d0;
        font-family: 'Avenir Next', 'Helvetica Neue', Arial, sans-serif;
        z-index: 1000;
        pointer-events: none;
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 140px;
      `;
            // Add speech bubble tail (moved to left side)
            const tailElement = document.createElement('div');
            tailElement.style.cssText = `
        position: absolute;
        bottom: -8px;
        left: 20px;
        width: 0;
        height: 0;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-top: 8px solid white;
        z-index: 1001;
      `;
            // Add tail border
            const tailBorderElement = document.createElement('div');
            tailBorderElement.style.cssText = `
        position: absolute;
        bottom: -9px;
        left: 20px;
        width: 0;
        height: 0;
        border-left: 9px solid transparent;
        border-right: 9px solid transparent;
        border-top: 9px solid #d0d0d0;
        z-index: 1000;
      `;
            // Create colored dot 
            const dotElement = document.createElement('div');
            dotElement.style.cssText = `
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: ${utilizationColor};
        flex-shrink: 0;
      `;
            // Create text container
            const textContainer = document.createElement('div');
            textContainer.style.cssText = `
        display: flex;
        flex-direction: column;
        gap: 1px;
      `;
            // Create utilization text (first, so it appears on top - extra bold, black, big)
            if (config.showUtilizationText) {
                const utilElement = document.createElement('div');
                utilElement.textContent = utilizationText;
                utilElement.style.cssText = `
          font-size: 16px;
          color: #000000;
          line-height: 1.2;
          font-weight: 900;
        `;
                textContainer.appendChild(utilElement);
            }
            // Create parking lot name (second, so it appears below - black, bold, slightly larger)
            const nameElement = document.createElement('div');
            nameElement.textContent = parkingLotName;
            nameElement.style.cssText = `
        font-size: 13px;
        font-weight: 700;
        color: #000000;
        line-height: 1.2;
      `;
            textContainer.appendChild(nameElement);
            labelElement.appendChild(dotElement);
            labelElement.appendChild(textContainer);
            // Add tail elements
            labelElement.appendChild(tailBorderElement);
            labelElement.appendChild(tailElement);
            // Add to map container
            mapContainer.appendChild(labelElement);
            // Store label info
            newLabels.push({
                element: labelElement,
                geometry: geometry,
                data: data
            });
        }
        labelsRef.current = newLabels;
        setParkingLotLabels(newLabels);
    });
    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "parking-lot-widget jimu-widget", "data-widget-id": id, style: { width: '100%', height: '100%', overflow: 'hidden', position: 'relative' } },
        useMapWidgetIds && useMapWidgetIds.length > 0 && ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.JimuMapViewComponent, { useMapWidgetId: useMapWidgetIds[0], onActiveViewChange: onActiveViewChange })),
        useDataSources && useDataSources.length > 0 && mapContainer ? ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceComponent, { useDataSource: useDataSources[0], widgetId: id, query: { page: 1, pageSize: 1000 } }, (ds) => {
            if (!ds) {
                return null;
            }
            if (ds.getStatus() === 'LOADED' && !labelsCreated) {
                const dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
                const dataSource = dsManager.getDataSource(useDataSources[0].dataSourceId);
                if (dataSource && dataSource.type === 'FEATURE_LAYER') {
                    const featureLayerDs = dataSource;
                    const layer = featureLayerDs.layer;
                    if (layer) {
                        // Wait for map to be fully loaded before querying
                        const waitForMapReady = () => {
                            var _a;
                            if ((_a = jimuMapView === null || jimuMapView === void 0 ? void 0 : jimuMapView.view) === null || _a === void 0 ? void 0 : _a.ready) {
                                // Respect the layer's definition expression (from views/filters)
                                // If no definition expression exists, use '1=1' to get all features
                                const whereClause = layer.definitionExpression || '1=1';
                                layer.queryFeatures({
                                    where: whereClause,
                                    outFields: ['*'],
                                    returnGeometry: true
                                }).then((result) => {
                                    if (result.features && result.features.length > 0) {
                                        // Add a small delay to ensure projection is ready
                                        setTimeout(() => {
                                            createCustomLabels(result.features);
                                            setLabelsCreated(true);
                                        }, 500);
                                    }
                                }).catch((error) => {
                                    var _a;
                                    // Retry after a delay if projection error
                                    if ((_a = error.message) === null || _a === void 0 ? void 0 : _a.includes('projection')) {
                                        setTimeout(() => {
                                            waitForMapReady();
                                        }, 1000);
                                    }
                                });
                            }
                            else {
                                setTimeout(waitForMapReady, 100);
                            }
                        };
                        waitForMapReady();
                    }
                    else {
                        // Silently handle missing layer
                    }
                }
                else {
                    // Silently handle non-feature layer
                }
            }
            return null;
        })) : null,
        !useMapWidgetIds || useMapWidgetIds.length === 0 ? ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "no-data" },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.FormattedMessage, { id: "selectMap", defaultMessage: "Please select a map widget in the settings" }))) : !useDataSources || useDataSources.length === 0 ? ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "no-data" },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.FormattedMessage, { id: "configureDataSource", defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_3__["default"].configureDataSource }))) : null));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9wYXJraW5nLWxvdC13aWRnZXQvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUEyRztBQUMzRyxNQUFpRztBQUNqRyxNQUF3RztBQUN4RyxNQUEySDtBQUMzSCxNQUFvSDtBQUNwSCxNQUFvSDtBQUNwSCxNQUErUztBQUMvUztBQUNBOztBQUVBOztBQUVBLDRCQUE0QixxR0FBbUI7QUFDL0Msd0JBQXdCLGtIQUFhO0FBQ3JDLGlCQUFpQix1R0FBYTtBQUM5QixpQkFBaUIsK0ZBQU07QUFDdkIsNkJBQTZCLHNHQUFrQjs7QUFFL0MsYUFBYSwwR0FBRyxDQUFDLDRPQUFPOzs7O0FBSXlQO0FBQ2pSLE9BQU8saUVBQWUsNE9BQU8sSUFBSSw0T0FBTyxVQUFVLDRPQUFPLG1CQUFtQixFQUFDOzs7Ozs7Ozs7Ozs7Ozs7O0FDeEI3RSxpRUFBZTtJQUNiLFlBQVksRUFBRSxvQkFBb0I7SUFDbEMsZ0JBQWdCLEVBQUUsb0JBQW9CO0lBQ3RDLFlBQVksRUFBRSwyQkFBMkI7SUFDekMsV0FBVyxFQUFFLDZCQUE2QjtJQUMxQyxnQkFBZ0IsRUFBRSwyQkFBMkI7SUFDN0MsZUFBZSxFQUFFLCtCQUErQjtJQUNoRCxtQkFBbUIsRUFBRSx1REFBdUQ7Q0FDN0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUkQ7QUFDc0g7QUFDakI7QUFDckcsOEJBQThCLG1GQUEyQixDQUFDLDRGQUFxQztBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsT0FBTyx3SEFBd0gsVUFBVSxXQUFXLE1BQU0sS0FBSyxXQUFXLE1BQU0sS0FBSyxVQUFVLFVBQVUsV0FBVyxVQUFVLE1BQU0sS0FBSyxXQUFXLE1BQU0sS0FBSyxVQUFVLFdBQVcsVUFBVSxNQUFNLEtBQUssV0FBVyxXQUFXLFdBQVcsV0FBVyxXQUFXLE1BQU0sS0FBSyxVQUFVLFdBQVcsVUFBVSxXQUFXLE1BQU0sS0FBSyxVQUFVLFVBQVUsV0FBVyxVQUFVLFdBQVcsV0FBVyxNQUFNLEtBQUssVUFBVSxXQUFXLFVBQVUsV0FBVyxVQUFVLFdBQVcsTUFBTSxLQUFLLFVBQVUsVUFBVSxXQUFXLHNCQUFzQixNQUFNLEtBQUssV0FBVyxVQUFVLFdBQVcsVUFBVSxXQUFXLFdBQVcsV0FBVyxNQUFNLEtBQUssV0FBVyxVQUFVLFVBQVUsV0FBVyxXQUFXLFdBQVcsTUFBTSxXQUFXLEtBQUssS0FBSyxVQUFVLEtBQUssS0FBSyxVQUFVLEtBQUssS0FBSyxVQUFVLEtBQUssS0FBSyxVQUFVLEtBQUssS0FBSyxXQUFXLEtBQUssV0FBVyxXQUFXLFdBQVcs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QUM7b0JBQ04sb0NBQW9DO2dCQUN0QyxDQUFDO1lBQ0gsQ0FBQztZQUVELE9BQU8sSUFBSTtRQUNiLENBQUMsQ0FDbUIsQ0FDdkIsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUdQLENBQUMsZUFBZSxJQUFJLGVBQWUsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUNsRCx3REFBSyxTQUFTLEVBQUMsU0FBUztZQUN0QiwrQ0FBQyx1REFBZ0IsSUFBQyxFQUFFLEVBQUMsV0FBVyxFQUFDLGNBQWMsRUFBQyw0Q0FBNEMsR0FBRSxDQUMxRixDQUNQLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxJQUFJLGNBQWMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUNuRCx3REFBSyxTQUFTLEVBQUMsU0FBUztZQUN0QiwrQ0FBQyx1REFBZ0IsSUFBQyxFQUFFLEVBQUMscUJBQXFCLEVBQUMsY0FBYyxFQUFFLDZEQUFtQixDQUFDLG1CQUFtQixHQUFHLENBQ2pHLENBQ1AsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUNKLENBQ1A7QUFDSCxDQUFDO0FBRUQsaUVBQWUsTUFBTTtBQUViLFNBQVMsMkJBQTJCLENBQUMsR0FBRyxJQUFJLHFCQUF1QixHQUFHLEdBQUcsRUFBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2Zpbm4vd2lkZ2V0cy9wYXJraW5nLWxvdC13aWRnZXQvc3JjL3J1bnRpbWUvc3R5bGUuY3NzPzE4M2YiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2Zpbm4vd2lkZ2V0cy9wYXJraW5nLWxvdC13aWRnZXQvc3JjL3J1bnRpbWUvdHJhbnNsYXRpb25zL2RlZmF1bHQudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2Zpbm4vd2lkZ2V0cy9wYXJraW5nLWxvdC13aWRnZXQvc3JjL3J1bnRpbWUvc3R5bGUuY3NzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1hcmNnaXNcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvbm9uY2UiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtY29yZS9saWIvc2V0LXB1YmxpYy1wYXRoLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9maW5uL3dpZGdldHMvcGFya2luZy1sb3Qtd2lkZ2V0L3NyYy9ydW50aW1lL3dpZGdldC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICBpbXBvcnQgZG9tQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0U3R5bGVFbGVtZW50IGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS51c2VbMV0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Jlc29sdmUtdXJsLWxvYWRlci9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS51c2VbMl0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzNdLnVzZVszXSEuL3N0eWxlLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xub3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS51c2VbMV0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Jlc29sdmUtdXJsLWxvYWRlci9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS51c2VbMl0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzNdLnVzZVszXSEuL3N0eWxlLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsImV4cG9ydCBkZWZhdWx0IHtcbiAgX3dpZGdldExhYmVsOiAnUGFya2luZyBMb3QgV2lkZ2V0JyxcbiAgcGFya2luZ0xvdFN0YXR1czogJ1BhcmtpbmcgTG90IFN0YXR1cycsXG4gIG5vRGF0YVNvdXJjZTogJ05vIGRhdGEgc291cmNlIGNvbmZpZ3VyZWQnLFxuICBsb2FkaW5nRGF0YTogJ0xvYWRpbmcgcGFya2luZyBsb3QgZGF0YS4uLicsXG4gIGVycm9yTG9hZGluZ0RhdGE6ICdFcnJvciBsb2FkaW5nIGRhdGEgc291cmNlJyxcbiAgbm9EYXRhQXZhaWxhYmxlOiAnTm8gcGFya2luZyBsb3QgZGF0YSBhdmFpbGFibGUnLFxuICBjb25maWd1cmVEYXRhU291cmNlOiAnUGxlYXNlIGNvbmZpZ3VyZSBhIGRhdGEgc291cmNlIGluIHRoZSB3aWRnZXQgc2V0dGluZ3MnXG59XG5cblxuXG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBgLnBhcmtpbmctbG90LXdpZGdldCB7XG4gIHBhZGRpbmc6IDE2cHg7XG4gIGZvbnQtZmFtaWx5OiBcIkF2ZW5pciBOZXh0XCIsIFwiSGVsdmV0aWNhIE5ldWVcIiwgQXJpYWwsIHNhbnMtc2VyaWY7XG59XG5cbi53aWRnZXQtaGVhZGVyIHtcbiAgbWFyZ2luLWJvdHRvbTogMTZweDtcbn1cblxuLndpZGdldC1oZWFkZXIgaDMge1xuICBtYXJnaW46IDA7XG4gIGZvbnQtc2l6ZTogMThweDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgY29sb3I6ICMzMjMyMzI7XG59XG5cbi53aWRnZXQtY29udGVudCB7XG4gIG1pbi1oZWlnaHQ6IDEwMHB4O1xufVxuXG4ucGFya2luZy1sb3QtbGlzdCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogMTJweDtcbn1cblxuLnBhcmtpbmctbG90LWl0ZW0ge1xuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBwYWRkaW5nOiAxMHB4IDEycHg7XG4gIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7XG59XG5cbi5wYXJraW5nLWxvdC1jb250ZW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiAxMnB4O1xuICBtYXJnaW4tYm90dG9tOiAycHg7XG59XG5cbi51dGlsaXphdGlvbi1kb3Qge1xuICB3aWR0aDogMjBweDtcbiAgaGVpZ2h0OiAyMHB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGZsZXgtc2hyaW5rOiAwO1xuICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTtcbiAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbn1cblxuLnBhcmtpbmctbG90LW5hbWUge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGNvbG9yOiAjMzIzMjMyO1xuICBsaW5lLWhlaWdodDogMS4zO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4udXRpbGl6YXRpb24tdGV4dCB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgY29sb3I6ICM2NjY2NjY7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIG1hcmdpbi1sZWZ0OiAzMnB4OyAvKiBBbGlnbiB3aXRoIHRleHQgYWZ0ZXIgdGhlIGRvdCAqL1xufVxuXG4ubm8tZGF0YSB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6ICM5OTk5OTk7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgcGFkZGluZzogMjBweDtcbiAgYmFja2dyb3VuZDogI2Y4ZjhmODtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBib3JkZXI6IDFweCBkYXNoZWQgI2NjY2NjYztcbn1cblxuLmxvYWRpbmcge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGNvbG9yOiAjNjY2NjY2O1xuICBwYWRkaW5nOiAyMHB4O1xuICBiYWNrZ3JvdW5kOiAjZjhmOGY4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7XG59XG5cbi8qIFJlc3BvbnNpdmUgZGVzaWduICovXG5AbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcbiAgLnBhcmtpbmctbG90LXdpZGdldCB7XG4gICAgcGFkZGluZzogMTJweDtcbiAgfVxuICAucGFya2luZy1sb3QtaXRlbSB7XG4gICAgcGFkZGluZzogMTBweDtcbiAgfVxuICAucGFya2luZy1sb3QtbmFtZSB7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICB9XG4gIC51dGlsaXphdGlvbi10ZXh0IHtcbiAgICBmb250LXNpemU6IDEycHg7XG4gIH1cbn1cbi8qIEhvdmVyIGVmZmVjdHMgKi9cbi5wYXJraW5nLWxvdC1pdGVtOmhvdmVyIHtcbiAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG59XG5cbi8qIExvYWRpbmcgc3RhdGUgKi9cbi5wYXJraW5nLWxvdC13aWRnZXQubG9hZGluZyB7XG4gIG9wYWNpdHk6IDAuNjtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5wYXJraW5nLWxvdC13aWRnZXQubG9hZGluZzo6YWZ0ZXIge1xuICBjb250ZW50OiBcIlwiO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogNTAlO1xuICBsZWZ0OiA1MCU7XG4gIHdpZHRoOiAyMHB4O1xuICBoZWlnaHQ6IDIwcHg7XG4gIG1hcmdpbjogLTEwcHggMCAwIC0xMHB4O1xuICBib3JkZXI6IDJweCBzb2xpZCAjZjNmM2YzO1xuICBib3JkZXItdG9wOiAycHggc29saWQgIzM0OThkYjtcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xuICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xufVxuXG5Aa2V5ZnJhbWVzIHNwaW4ge1xuICAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XG4gIH1cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcbiAgfVxufWAsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vZmlubi93aWRnZXRzL3BhcmtpbmctbG90LXdpZGdldC9zcmMvcnVudGltZS9zdHlsZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7RUFDRSxhQUFBO0VBQ0EsK0RBQUE7QUFDRjs7QUFFQTtFQUNFLG1CQUFBO0FBQ0Y7O0FBRUE7RUFDRSxTQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsY0FBQTtBQUNGOztBQUVBO0VBQ0UsaUJBQUE7QUFDRjs7QUFFQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLFNBQUE7QUFDRjs7QUFFQTtFQUNFLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtFQUNBLHdDQUFBO0VBQ0EseUJBQUE7QUFDRjs7QUFFQTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLFNBQUE7RUFDQSxrQkFBQTtBQUNGOztBQUVBO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGNBQUE7RUFDQSx1QkFBQTtFQUNBLHdDQUFBO0FBQ0Y7O0FBRUE7RUFDRSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxjQUFBO0VBQ0EsZ0JBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7RUFDQSxjQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQSxFQUFBLGtDQUFBO0FBQ0Y7O0FBRUE7RUFDRSxrQkFBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EsMEJBQUE7QUFDRjs7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7QUFDRjs7QUFFQSxzQkFBQTtBQUNBO0VBQ0U7SUFDRSxhQUFBO0VBQ0Y7RUFFQTtJQUNFLGFBQUE7RUFBRjtFQUdBO0lBQ0UsZUFBQTtFQURGO0VBSUE7SUFDRSxlQUFBO0VBRkY7QUFDRjtBQUtBLGtCQUFBO0FBQ0E7RUFDRSwwQ0FBQTtFQUNBLDJCQUFBO0VBQ0EseUJBQUE7QUFIRjs7QUFNQSxrQkFBQTtBQUNBO0VBQ0UsWUFBQTtFQUNBLG9CQUFBO0FBSEY7O0FBTUE7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsdUJBQUE7RUFDQSx5QkFBQTtFQUNBLDZCQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQ0FBQTtBQUhGOztBQU1BO0VBQ0U7SUFBSyx1QkFBQTtFQUZMO0VBR0E7SUFBTyx5QkFBQTtFQUFQO0FBQ0ZcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLnBhcmtpbmctbG90LXdpZGdldCB7XFxuICBwYWRkaW5nOiAxNnB4O1xcbiAgZm9udC1mYW1pbHk6ICdBdmVuaXIgTmV4dCcsICdIZWx2ZXRpY2EgTmV1ZScsIEFyaWFsLCBzYW5zLXNlcmlmO1xcbn1cXG5cXG4ud2lkZ2V0LWhlYWRlciB7XFxuICBtYXJnaW4tYm90dG9tOiAxNnB4O1xcbn1cXG5cXG4ud2lkZ2V0LWhlYWRlciBoMyB7XFxuICBtYXJnaW46IDA7XFxuICBmb250LXNpemU6IDE4cHg7XFxuICBmb250LXdlaWdodDogNjAwO1xcbiAgY29sb3I6ICMzMjMyMzI7XFxufVxcblxcbi53aWRnZXQtY29udGVudCB7XFxuICBtaW4taGVpZ2h0OiAxMDBweDtcXG59XFxuXFxuLnBhcmtpbmctbG90LWxpc3Qge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICBnYXA6IDEycHg7XFxufVxcblxcbi5wYXJraW5nLWxvdC1pdGVtIHtcXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xcbiAgcGFkZGluZzogMTBweCAxMnB4O1xcbiAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7XFxufVxcblxcbi5wYXJraW5nLWxvdC1jb250ZW50IHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgZ2FwOiAxMnB4O1xcbiAgbWFyZ2luLWJvdHRvbTogMnB4O1xcbn1cXG5cXG4udXRpbGl6YXRpb24tZG90IHtcXG4gIHdpZHRoOiAyMHB4O1xcbiAgaGVpZ2h0OiAyMHB4O1xcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcbiAgZmxleC1zaHJpbms6IDA7XFxuICBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTtcXG4gIGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMik7XFxufVxcblxcbi5wYXJraW5nLWxvdC1uYW1lIHtcXG4gIGZvbnQtc2l6ZTogMTZweDtcXG4gIGZvbnQtd2VpZ2h0OiA3MDA7XFxuICBjb2xvcjogIzMyMzIzMjtcXG4gIGxpbmUtaGVpZ2h0OiAxLjM7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG59XFxuXFxuLnV0aWxpemF0aW9uLXRleHQge1xcbiAgZm9udC1zaXplOiAxNHB4O1xcbiAgY29sb3I6ICM2NjY2NjY7XFxuICBmb250LXdlaWdodDogNDAwO1xcbiAgbWFyZ2luLWxlZnQ6IDMycHg7IC8qIEFsaWduIHdpdGggdGV4dCBhZnRlciB0aGUgZG90ICovXFxufVxcblxcbi5uby1kYXRhIHtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGNvbG9yOiAjOTk5OTk5O1xcbiAgZm9udC1zdHlsZTogaXRhbGljO1xcbiAgcGFkZGluZzogMjBweDtcXG4gIGJhY2tncm91bmQ6ICNmOGY4Zjg7XFxuICBib3JkZXItcmFkaXVzOiA4cHg7XFxuICBib3JkZXI6IDFweCBkYXNoZWQgI2NjY2NjYztcXG59XFxuXFxuLmxvYWRpbmcge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgY29sb3I6ICM2NjY2NjY7XFxuICBwYWRkaW5nOiAyMHB4O1xcbiAgYmFja2dyb3VuZDogI2Y4ZjhmODtcXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7XFxufVxcblxcbi8qIFJlc3BvbnNpdmUgZGVzaWduICovXFxuQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7XFxuICAucGFya2luZy1sb3Qtd2lkZ2V0IHtcXG4gICAgcGFkZGluZzogMTJweDtcXG4gIH1cXG4gIFxcbiAgLnBhcmtpbmctbG90LWl0ZW0ge1xcbiAgICBwYWRkaW5nOiAxMHB4O1xcbiAgfVxcbiAgXFxuICAucGFya2luZy1sb3QtbmFtZSB7XFxuICAgIGZvbnQtc2l6ZTogMTRweDtcXG4gIH1cXG4gIFxcbiAgLnV0aWxpemF0aW9uLXRleHQge1xcbiAgICBmb250LXNpemU6IDEycHg7XFxuICB9XFxufVxcblxcbi8qIEhvdmVyIGVmZmVjdHMgKi9cXG4ucGFya2luZy1sb3QtaXRlbTpob3ZlciB7XFxuICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XFxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7XFxuICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xcbn1cXG5cXG4vKiBMb2FkaW5nIHN0YXRlICovXFxuLnBhcmtpbmctbG90LXdpZGdldC5sb2FkaW5nIHtcXG4gIG9wYWNpdHk6IDAuNjtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG5cXG4ucGFya2luZy1sb3Qtd2lkZ2V0LmxvYWRpbmc6OmFmdGVyIHtcXG4gIGNvbnRlbnQ6ICcnO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiA1MCU7XFxuICBsZWZ0OiA1MCU7XFxuICB3aWR0aDogMjBweDtcXG4gIGhlaWdodDogMjBweDtcXG4gIG1hcmdpbjogLTEwcHggMCAwIC0xMHB4O1xcbiAgYm9yZGVyOiAycHggc29saWQgI2YzZjNmMztcXG4gIGJvcmRlci10b3A6IDJweCBzb2xpZCAjMzQ5OGRiO1xcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcbiAgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTtcXG59XFxuXFxuQGtleWZyYW1lcyBzcGluIHtcXG4gIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cXG4gIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcpIHtcbiAgdmFyIGxpc3QgPSBbXTtcblxuICAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gXCJcIjtcbiAgICAgIHZhciBuZWVkTGF5ZXIgPSB0eXBlb2YgaXRlbVs1XSAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIik7XG4gICAgICB9XG4gICAgICBpZiAobmVlZExheWVyKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGNvbnRlbnQgKz0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtKTtcbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfTtcblxuICAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICBsaXN0LmkgPSBmdW5jdGlvbiBpKG1vZHVsZXMsIG1lZGlhLCBkZWR1cGUsIHN1cHBvcnRzLCBsYXllcikge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgdW5kZWZpbmVkXV07XG4gICAgfVxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXNba11bMF07XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIF9rID0gMDsgX2sgPCBtb2R1bGVzLmxlbmd0aDsgX2srKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfa10pO1xuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBsYXllciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW1bNV0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQGxheWVyXCIuY29uY2F0KGl0ZW1bNV0ubGVuZ3RoID4gMCA/IFwiIFwiLmNvbmNhdChpdGVtWzVdKSA6IFwiXCIsIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzVdID0gbGF5ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtZWRpYSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsxXSA9IFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3VwcG9ydHMpIHtcbiAgICAgICAgaWYgKCFpdGVtWzRdKSB7XG4gICAgICAgICAgaXRlbVs0XSA9IFwiXCIuY29uY2F0KHN1cHBvcnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNF0gPSBzdXBwb3J0cztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGxpc3Q7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXTtcbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuICBpZiAodHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIHJldHVybiBbY29udGVudF0uam9pbihcIlxcblwiKTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5ET00ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5ET01baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleEJ5SWRlbnRpZmllciA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXSxcbiAgICAgIHN1cHBvcnRzOiBpdGVtWzRdLFxuICAgICAgbGF5ZXI6IGl0ZW1bNV1cbiAgICB9O1xuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgbWVtbyA9IHt9O1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGdldFRhcmdldCh0YXJnZXQpIHtcbiAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG5cbiAgICAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gIH1cbiAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRCeVNlbGVjdG9yKGluc2VydCwgc3R5bGUpIHtcbiAgdmFyIHRhcmdldCA9IGdldFRhcmdldChpbnNlcnQpO1xuICBpZiAoIXRhcmdldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gIH1cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0QnlTZWxlY3RvcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzKHN0eWxlRWxlbWVudCkge1xuICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09IFwidW5kZWZpbmVkXCIgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBcIlwiO1xuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQob2JqLnN1cHBvcnRzLCBcIikge1wiKTtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIik7XG4gIH1cbiAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBvYmoubGF5ZXIgIT09IFwidW5kZWZpbmVkXCI7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJAbGF5ZXJcIi5jb25jYXQob2JqLmxheWVyLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQob2JqLmxheWVyKSA6IFwiXCIsIFwiIHtcIik7XG4gIH1cbiAgY3NzICs9IG9iai5jc3M7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH1cblxuICAvLyBGb3Igb2xkIElFXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cbiAgb3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZUVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7fSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBvcHRpb25zLmluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvYmopIHtcbiAgICAgIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG4gICAgfVxuICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBkb21BUEk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQpIHtcbiAgaWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVRhZ1RyYW5zZm9ybTsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9hcmNnaXNfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9jb3JlX187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5uYyA9IHVuZGVmaW5lZDsiLCIvKipcclxuICogV2VicGFjayB3aWxsIHJlcGxhY2UgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gd2l0aCBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgdG8gc2V0IHRoZSBwdWJsaWMgcGF0aCBkeW5hbWljYWxseS5cclxuICogVGhlIHJlYXNvbiB3aHkgd2UgY2FuJ3Qgc2V0IHRoZSBwdWJsaWNQYXRoIGluIHdlYnBhY2sgY29uZmlnIGlzOiB3ZSBjaGFuZ2UgdGhlIHB1YmxpY1BhdGggd2hlbiBkb3dubG9hZC5cclxuICogKi9cclxuX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB3aW5kb3cuamltdUNvbmZpZy5iYXNlVXJsXHJcbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIHR5cGUgQWxsV2lkZ2V0UHJvcHMsIERhdGFTb3VyY2VDb21wb25lbnQsIHR5cGUgRGF0YVNvdXJjZSwganN4LCBGb3JtYXR0ZWRNZXNzYWdlLCBEYXRhU291cmNlTWFuYWdlciwgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEppbXVNYXBWaWV3Q29tcG9uZW50LCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyB0eXBlIElNQ29uZmlnIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0ICcuL3N0eWxlLmNzcydcbmltcG9ydCBkZWZhdWx0STE4bk1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5cbmludGVyZmFjZSBQYXJraW5nTG90RGF0YSB7XG4gIFtrZXk6IHN0cmluZ106IGFueVxufVxuXG5jb25zdCBXaWRnZXQgPSAocHJvcHM6IEFsbFdpZGdldFByb3BzPElNQ29uZmlnPikgPT4ge1xuICBjb25zdCB7IGNvbmZpZywgaWQsIHVzZURhdGFTb3VyY2VzLCB1c2VNYXBXaWRnZXRJZHMgfSA9IHByb3BzXG4gIGNvbnN0IFtqaW11TWFwVmlldywgc2V0SmltdU1hcFZpZXddID0gUmVhY3QudXNlU3RhdGU8SmltdU1hcFZpZXc+KG51bGwpXG4gIGNvbnN0IFtwYXJraW5nTG90TGFiZWxzLCBzZXRQYXJraW5nTG90TGFiZWxzXSA9IFJlYWN0LnVzZVN0YXRlPGFueVtdPihbXSlcbiAgY29uc3QgW21hcENvbnRhaW5lciwgc2V0TWFwQ29udGFpbmVyXSA9IFJlYWN0LnVzZVN0YXRlPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBjb25zdCBbbGFiZWxzQ3JlYXRlZCwgc2V0TGFiZWxzQ3JlYXRlZF0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPihmYWxzZSlcbiAgY29uc3QgW2N1cnJlbnRab29tLCBzZXRDdXJyZW50Wm9vbV0gPSBSZWFjdC51c2VTdGF0ZTxudW1iZXI+KDApXG4gIGNvbnN0IGxhYmVsc1JlZiA9IFJlYWN0LnVzZVJlZjxhbnlbXT4oW10pXG4gIGNvbnN0IGxlZ2VuZFJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcblxuICAvLyBIYW5kbGUgbWFwIHZpZXcgYWN0aXZhdGlvblxuICBjb25zdCBvbkFjdGl2ZVZpZXdDaGFuZ2UgPSAoam12OiBKaW11TWFwVmlldykgPT4ge1xuICAgIGlmIChqbXYpIHtcbiAgICAgIHNldEppbXVNYXBWaWV3KGptdilcbiAgICAgIFxuICAgICAgLy8gVHJ5IG11bHRpcGxlIHNlbGVjdG9ycyB0byBmaW5kIHRoZSBtYXAgY29udGFpbmVyXG4gICAgICBsZXQgbWFwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7dXNlTWFwV2lkZ2V0SWRzPy5bMF19XCJdIC5tYXAtcm9vdGApXG4gICAgICBcbiAgICAgIGlmICghbWFwRWxlbWVudCkge1xuICAgICAgICAvLyBUcnkgYWx0ZXJuYXRpdmUgc2VsZWN0b3JzXG4gICAgICAgIG1hcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS13aWRnZXQtaWQ9XCIke3VzZU1hcFdpZGdldElkcz8uWzBdfVwiXSAuZXNyaS12aWV3YClcbiAgICAgICAgaWYgKCFtYXBFbGVtZW50KSB7XG4gICAgICAgICAgbWFwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7dXNlTWFwV2lkZ2V0SWRzPy5bMF19XCJdIC5lc3JpLXZpZXctcm9vdGApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtYXBFbGVtZW50KSB7XG4gICAgICAgICAgbWFwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXdpZGdldC1pZD1cIiR7dXNlTWFwV2lkZ2V0SWRzPy5bMF19XCJdYClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobWFwRWxlbWVudCkge1xuICAgICAgICBzZXRNYXBDb250YWluZXIobWFwRWxlbWVudCBhcyBIVE1MRGl2RWxlbWVudClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZhbGxiYWNrOiB0cnkgdG8gZmluZCBhbnkgbWFwIHZpZXcgZWxlbWVudFxuICAgICAgICBjb25zdCBmYWxsYmFja0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXNyaS12aWV3LXJvb3QnKVxuICAgICAgICBpZiAoZmFsbGJhY2tFbGVtZW50KSB7XG4gICAgICAgICAgc2V0TWFwQ29udGFpbmVyKGZhbGxiYWNrRWxlbWVudCBhcyBIVE1MRGl2RWxlbWVudClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBsYWJlbCBwb3NpdGlvbnMgd2hlbiBtYXAgdmlldyBjaGFuZ2VzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGppbXVNYXBWaWV3ICYmIHBhcmtpbmdMb3RMYWJlbHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdXBkYXRlTGFiZWxQb3NpdGlvbnMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHpvb20gPSBqaW11TWFwVmlldy52aWV3Lnpvb21cbiAgICAgICAgc2V0Q3VycmVudFpvb20oem9vbSlcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGF0ZSBzY2FsZSBmYWN0b3IgYmFzZWQgb24gem9vbSBsZXZlbFxuICAgICAgICBjb25zdCBzY2FsZSA9IE1hdGgubWF4KDAuMywgTWF0aC5taW4oMS4wLCAoem9vbSAtIDEwKSAvIDgpKVxuICAgICAgICBcbiAgICAgICAgcGFya2luZ0xvdExhYmVscy5mb3JFYWNoKGxhYmVsID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2NyZWVuUG9pbnQgPSBqaW11TWFwVmlldy52aWV3LnRvU2NyZWVuKGxhYmVsLmdlb21ldHJ5KVxuICAgICAgICAgICAgaWYgKGxhYmVsLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgLy8gQXBwbHkgc2NhbGluZyB3aXRoIHRhaWwgcG9zaXRpb24gYXMgb3JpZ2luICgyMHB4IGZyb20gbGVmdClcbiAgICAgICAgICAgICAgbGFiZWwuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUoJHtzY2FsZX0pYFxuICAgICAgICAgICAgICBsYWJlbC5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICcyMHB4IGJvdHRvbSdcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEdldCB0aGUgZWxlbWVudCBoZWlnaHQgdG8gcG9zaXRpb24gaXQgYWJvdmUgdGhlIHBvaW50XG4gICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRIZWlnaHQgPSBsYWJlbC5lbGVtZW50Lm9mZnNldEhlaWdodCB8fCA2MFxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRml4ZWQgb2Zmc2V0IC0gdGFpbCBzaG91bGQgcG9pbnQgdG8gdGhlIGV4YWN0IGNvb3JkaW5hdGVcbiAgICAgICAgICAgICAgbGFiZWwuZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7c2NyZWVuUG9pbnQueCAtIDIwfXB4YFxuICAgICAgICAgICAgICBsYWJlbC5lbGVtZW50LnN0eWxlLnRvcCA9IGAke3NjcmVlblBvaW50LnkgLSBlbGVtZW50SGVpZ2h0IC0gOH1weGBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gU2lsZW50bHkgaGFuZGxlIHBvc2l0aW9uIHVwZGF0ZSBlcnJvcnNcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSBwb3NpdGlvbnMgb24gdmlldyBjaGFuZ2VzXG4gICAgICBqaW11TWFwVmlldy52aWV3LndhdGNoKCdleHRlbnQnLCB1cGRhdGVMYWJlbFBvc2l0aW9ucylcbiAgICAgIGppbXVNYXBWaWV3LnZpZXcud2F0Y2goJ2NlbnRlcicsIHVwZGF0ZUxhYmVsUG9zaXRpb25zKVxuICAgICAgamltdU1hcFZpZXcudmlldy53YXRjaCgnem9vbScsIHVwZGF0ZUxhYmVsUG9zaXRpb25zKVxuICAgICAgXG4gICAgICAvLyBJbml0aWFsIHBvc2l0aW9uIHVwZGF0ZVxuICAgICAgdXBkYXRlTGFiZWxQb3NpdGlvbnMoKVxuICAgIH1cbiAgfSwgW2ppbXVNYXBWaWV3LCBwYXJraW5nTG90TGFiZWxzXSlcblxuICAvLyBDbGVhbiB1cCBsYWJlbHMgd2hlbiB3aWRnZXQgdW5tb3VudHNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcGFya2luZ0xvdExhYmVscy5mb3JFYWNoKGxhYmVsID0+IHtcbiAgICAgICAgaWYgKGxhYmVsLmVsZW1lbnQgJiYgbGFiZWwuZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgbGFiZWwuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGxhYmVsLmVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9LCBbcGFya2luZ0xvdExhYmVsc10pXG5cbiAgLy8gUmVzZXQgbGFiZWxzIHdoZW4gZGF0YSBzb3VyY2Ugb3IgY29uZmlnIGNoYW5nZXNcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBBbHdheXMgY2xlYXIgYW5kIHJlc2V0IHdoZW4gY29uZmlnIGNoYW5nZXNcbiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgLy8gUmVtb3ZlIGFsbCBsYWJlbHMgZnJvbSBET01cbiAgICAgIGNvbnN0IGFsbExhYmVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYXJraW5nLWxvdC1tYXAtbGFiZWwnKVxuICAgICAgYWxsTGFiZWxzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBpZiAoZWwucGFyZW50Tm9kZSkge1xuICAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFJlbW92ZSBsZWdlbmRcbiAgICAgIGlmIChsZWdlbmRSZWYuY3VycmVudCAmJiBsZWdlbmRSZWYuY3VycmVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgIGxlZ2VuZFJlZi5jdXJyZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobGVnZW5kUmVmLmN1cnJlbnQpXG4gICAgICAgIGxlZ2VuZFJlZi5jdXJyZW50ID0gbnVsbFxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDbGVhciBzdGF0ZVxuICAgICAgc2V0UGFya2luZ0xvdExhYmVscyhbXSlcbiAgICAgIHNldExhYmVsc0NyZWF0ZWQoZmFsc2UpXG4gICAgfVxuICAgIFxuICAgIGNsZWFudXAoKVxuICB9LCBbdXNlRGF0YVNvdXJjZXMsIGNvbmZpZy5wYXJraW5nTG90RmllbGQsIGNvbmZpZy51dGlsaXphdGlvbkZpZWxkLCBjb25maWcuc2hvd1V0aWxpemF0aW9uVGV4dCwgY29uZmlnLmFsbG93TmVnYXRpdmVzLCBjb25maWcuY29sb3JSYW5nZXMsIGNvbmZpZy5mdWxsVGhyZXNob2xkXSlcblxuICBjb25zdCBnZXRVdGlsaXphdGlvbkNvbG9yID0gKHBlcmNlbnRhZ2U6IG51bWJlcik6IHN0cmluZyA9PiB7XG4gICAgLy8gSGFuZGxlIG5lZ2F0aXZlIHZhbHVlcyBiYXNlZCBvbiBzZXR0aW5nXG4gICAgbGV0IGFkanVzdGVkUGVyY2VudGFnZSA9IHBlcmNlbnRhZ2VcbiAgICBpZiAoIWNvbmZpZy5hbGxvd05lZ2F0aXZlcyAmJiBwZXJjZW50YWdlIDwgMCkge1xuICAgICAgYWRqdXN0ZWRQZXJjZW50YWdlID0gMFxuICAgIH1cbiAgICBcbiAgICAvLyBDbGFtcCBwZXJjZW50YWdlIHRvIDAtMTAwIHJhbmdlXG4gICAgYWRqdXN0ZWRQZXJjZW50YWdlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBhZGp1c3RlZFBlcmNlbnRhZ2UpKVxuICAgIFxuICAgIC8vIFJvdW5kIHRvIGF2b2lkIGRlY2ltYWwgcHJlY2lzaW9uIGlzc3Vlc1xuICAgIGFkanVzdGVkUGVyY2VudGFnZSA9IE1hdGgucm91bmQoYWRqdXN0ZWRQZXJjZW50YWdlKVxuICAgIFxuICAgIC8vIFNvcnQgcmFuZ2VzIGJ5IG1pblZhbHVlIHRvIGVuc3VyZSBjb3JyZWN0IG1hdGNoaW5nXG4gICAgY29uc3Qgc29ydGVkUmFuZ2VzID0gWy4uLmNvbmZpZy5jb2xvclJhbmdlc10uc29ydCgoYSwgYikgPT4gYS5taW5WYWx1ZSAtIGIubWluVmFsdWUpXG4gICAgXG4gICAgLy8gRmluZCB0aGUgY29sb3IgcmFuZ2UgdGhhdCBtYXRjaGVzIHRoZSBwZXJjZW50YWdlXG4gICAgY29uc3QgbWF0Y2hpbmdSYW5nZSA9IHNvcnRlZFJhbmdlcy5maW5kKHJhbmdlID0+IFxuICAgICAgYWRqdXN0ZWRQZXJjZW50YWdlID49IHJhbmdlLm1pblZhbHVlICYmIGFkanVzdGVkUGVyY2VudGFnZSA8PSByYW5nZS5tYXhWYWx1ZVxuICAgIClcbiAgICBcbiAgICAvLyBJZiBzdGlsbCBubyBtYXRjaCwgZmluZCB0aGUgY2xvc2VzdCByYW5nZVxuICAgIGlmICghbWF0Y2hpbmdSYW5nZSAmJiBzb3J0ZWRSYW5nZXMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gRmluZCB0aGUgcmFuZ2Ugd2l0aCB0aGUgY2xvc2VzdCBtaW5WYWx1ZVxuICAgICAgY29uc3QgY2xvc2VzdFJhbmdlID0gc29ydGVkUmFuZ2VzLnJlZHVjZSgocHJldiwgY3VycikgPT4ge1xuICAgICAgICByZXR1cm4gTWF0aC5hYnMoY3Vyci5taW5WYWx1ZSAtIGFkanVzdGVkUGVyY2VudGFnZSkgPCBNYXRoLmFicyhwcmV2Lm1pblZhbHVlIC0gYWRqdXN0ZWRQZXJjZW50YWdlKSBcbiAgICAgICAgICA/IGN1cnIgXG4gICAgICAgICAgOiBwcmV2XG4gICAgICB9KVxuICAgICAgcmV0dXJuIGNsb3Nlc3RSYW5nZS5jb2xvclxuICAgIH1cbiAgICBcbiAgICAvLyBJZiBubyBtYXRjaCBmb3VuZCBhdCBhbGwsIGRlZmF1bHQgdG8gcmVkIChoaWdoIHV0aWxpemF0aW9uKSBmb3Igc2FmZXR5XG4gICAgLy8gR3JleSBzaG91bGQgb25seSBiZSB1c2VkIGZvciBcImNsb3NlZFwiIHN0YXR1cyBpbiB0aGUgZnV0dXJlXG4gICAgcmV0dXJuIG1hdGNoaW5nUmFuZ2UgPyBtYXRjaGluZ1JhbmdlLmNvbG9yIDogJyNGNDQzMzYnXG4gIH1cblxuICBjb25zdCBnZXRVdGlsaXphdGlvblRleHQgPSAocGVyY2VudGFnZTogbnVtYmVyKTogc3RyaW5nID0+IHtcbiAgICBsZXQgZnJlZVBlcmNlbnRhZ2UgPSAxMDAgLSBwZXJjZW50YWdlXG4gICAgXG4gICAgLy8gSGFuZGxlIG5lZ2F0aXZlIHZhbHVlcyBiYXNlZCBvbiBzZXR0aW5nXG4gICAgaWYgKCFjb25maWcuYWxsb3dOZWdhdGl2ZXMgJiYgZnJlZVBlcmNlbnRhZ2UgPCAwKSB7XG4gICAgICBmcmVlUGVyY2VudGFnZSA9IDBcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgYXZhaWxhYmlsaXR5IGlzIDEwJSBvciBsZXNzICh1dGlsaXphdGlvbiA5MCUgb3IgbW9yZSlcbiAgICAvLyBTaG93IFwiRnVsbFwiIGluc3RlYWQgb2YgdGhlIGxvdyBwZXJjZW50YWdlXG4gICAgaWYgKGZyZWVQZXJjZW50YWdlIDw9IDEwKSB7XG4gICAgICByZXR1cm4gJ0Z1bGwnXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKGZyZWVQZXJjZW50YWdlKX0lIEF2YWlsYWJsZWBcbiAgfVxuXG4gIC8vIENyZWF0ZSBsZWdlbmQgZWxlbWVudFxuICBjb25zdCBjcmVhdGVMZWdlbmQgPSAoKSA9PiB7XG4gICAgaWYgKCFtYXBDb250YWluZXIgfHwgbGVnZW5kUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJldHVybiAvLyBBbHJlYWR5IGV4aXN0cyBvciBubyBjb250YWluZXJcbiAgICB9XG5cbiAgICBjb25zdCBsZWdlbmRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBsZWdlbmRFbGVtZW50LmNsYXNzTmFtZSA9ICdwYXJraW5nLWxvdC1sZWdlbmQnXG4gICAgbGVnZW5kRWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm90dG9tOiAyMHB4O1xuICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpO1xuICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgcGFkZGluZzogMTZweCAyMHB4O1xuICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4yKTtcbiAgICAgIHotaW5kZXg6IDEwMDAwO1xuICAgICAgbWluLXdpZHRoOiAxNjBweDtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgIGBcblxuICAgIGxlZ2VuZEVsZW1lbnQuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBzdHlsZT1cImZvbnQtc2l6ZTogMTZweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMDAwMDAwOyBtYXJnaW4tYm90dG9tOiAxMnB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtZmFtaWx5OiAnQXZlbmlyIE5leHQnLCAnSGVsdmV0aWNhIE5ldWUnLCBBcmlhbCwgc2Fucy1zZXJpZjtcIj5cbiAgICAgICAgQXZhaWxhYmlsaXR5IEd1aWRlXG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7IG1hcmdpbi1ib3R0b206IDhweDtcIj5cbiAgICAgICAgPGRpdiBzdHlsZT1cIndpZHRoOiAxNnB4OyBoZWlnaHQ6IDE2cHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgYmFja2dyb3VuZC1jb2xvcjogIzRDQUY1MDsgZmxleC1zaHJpbms6IDA7XCI+PC9kaXY+XG4gICAgICAgIDxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiAxNHB4OyBjb2xvcjogIzAwMDAwMDsgZm9udC1mYW1pbHk6ICdBdmVuaXIgTmV4dCcsICdIZWx2ZXRpY2EgTmV1ZScsIEFyaWFsLCBzYW5zLXNlcmlmO1wiPkhpZ2g8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7IG1hcmdpbi1ib3R0b206IDhweDtcIj5cbiAgICAgICAgPGRpdiBzdHlsZT1cIndpZHRoOiAxNnB4OyBoZWlnaHQ6IDE2cHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgYmFja2dyb3VuZC1jb2xvcjogI0ZGQzEwNzsgZmxleC1zaHJpbms6IDA7XCI+PC9kaXY+XG4gICAgICAgIDxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiAxNHB4OyBjb2xvcjogIzAwMDAwMDsgZm9udC1mYW1pbHk6ICdBdmVuaXIgTmV4dCcsICdIZWx2ZXRpY2EgTmV1ZScsIEFyaWFsLCBzYW5zLXNlcmlmO1wiPk1lZGl1bTwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTBweDsgbWFyZ2luLWJvdHRvbTogOHB4O1wiPlxuICAgICAgICA8ZGl2IHN0eWxlPVwid2lkdGg6IDE2cHg7IGhlaWdodDogMTZweDsgYm9yZGVyLXJhZGl1czogNTAlOyBiYWNrZ3JvdW5kLWNvbG9yOiAjRjQ0MzM2OyBmbGV4LXNocmluazogMDtcIj48L2Rpdj5cbiAgICAgICAgPHNwYW4gc3R5bGU9XCJmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjMDAwMDAwOyBmb250LWZhbWlseTogJ0F2ZW5pciBOZXh0JywgJ0hlbHZldGljYSBOZXVlJywgQXJpYWwsIHNhbnMtc2VyaWY7XCI+TG93IG9yIEZ1bGw8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7XCI+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJ3aWR0aDogMTZweDsgaGVpZ2h0OiAxNnB4OyBib3JkZXItcmFkaXVzOiA1MCU7IGJhY2tncm91bmQtY29sb3I6ICM2NjY2NjY7IGZsZXgtc2hyaW5rOiAwO1wiPjwvZGl2PlxuICAgICAgICA8c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogMTRweDsgY29sb3I6ICMwMDAwMDA7IGZvbnQtZmFtaWx5OiAnQXZlbmlyIE5leHQnLCAnSGVsdmV0aWNhIE5ldWUnLCBBcmlhbCwgc2Fucy1zZXJpZjtcIj5DbG9zZWQ8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICBgXG5cbiAgICBtYXBDb250YWluZXIuYXBwZW5kQ2hpbGQobGVnZW5kRWxlbWVudClcbiAgICBsZWdlbmRSZWYuY3VycmVudCA9IGxlZ2VuZEVsZW1lbnRcbiAgfVxuXG4gIC8vIENyZWF0ZSBjdXN0b20gSFRNTCBsYWJlbHNcbiAgY29uc3QgY3JlYXRlQ3VzdG9tTGFiZWxzID0gYXN5bmMgKHJlY29yZHM6IF9fZXNyaS5HcmFwaGljW10pID0+IHtcbiAgICBpZiAoIW1hcENvbnRhaW5lciB8fCAhamltdU1hcFZpZXcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBsZWdlbmQgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGNyZWF0ZUxlZ2VuZCgpXG5cbiAgICAvLyBMb2FkIHJlcXVpcmVkIG1vZHVsZXNcbiAgICBsZXQgcHJvamVjdGlvbiA9IG51bGxcbiAgICBsZXQgUG9pbnQgPSBudWxsXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1vZHVsZXMgPSBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS9nZW9tZXRyeS9wcm9qZWN0aW9uJywgJ2VzcmkvZ2VvbWV0cnkvUG9pbnQnLCAnZXNyaS9nZW9tZXRyeS9TcGF0aWFsUmVmZXJlbmNlJ10pXG4gICAgICBwcm9qZWN0aW9uID0gbW9kdWxlc1swXVxuICAgICAgUG9pbnQgPSBtb2R1bGVzWzFdXG4gICAgICBjb25zdCBTcGF0aWFsUmVmZXJlbmNlID0gbW9kdWxlc1syXVxuICAgICAgXG4gICAgICBhd2FpdCBwcm9qZWN0aW9uLmxvYWQoKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBTaWxlbnRseSBoYW5kbGUgcHJvamVjdGlvbiBlcnJvcnNcbiAgICB9XG5cbiAgICAvLyBDbGVhciBBTEwgZXhpc3RpbmcgbGFiZWxzIGZyb20gRE9NIHVzaW5nIHJlZlxuICAgIGxhYmVsc1JlZi5jdXJyZW50LmZvckVhY2gobGFiZWwgPT4ge1xuICAgICAgaWYgKGxhYmVsLmVsZW1lbnQgJiYgbGFiZWwuZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgIGxhYmVsLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChsYWJlbC5lbGVtZW50KVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWxzbyBxdWVyeSBhbmQgcmVtb3ZlIGFueSBvcnBoYW5lZCBsYWJlbHNcbiAgICBjb25zdCBvcnBoYW5lZExhYmVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYXJraW5nLWxvdC1tYXAtbGFiZWwnKVxuICAgIG9ycGhhbmVkTGFiZWxzLmZvckVhY2goZWwgPT4ge1xuICAgICAgaWYgKGVsLnBhcmVudE5vZGUpIHtcbiAgICAgICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIGxhYmVsc1JlZi5jdXJyZW50ID0gW11cbiAgICBzZXRQYXJraW5nTG90TGFiZWxzKFtdKVxuXG4gICAgY29uc3QgbmV3TGFiZWxzOiBhbnlbXSA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiByZWNvcmRzKSB7XG4gICAgICBjb25zdCBkYXRhID0gcmVjb3JkLmF0dHJpYnV0ZXMgYXMgUGFya2luZ0xvdERhdGFcbiAgICAgIGNvbnN0IHBhcmtpbmdMb3ROYW1lID0gZGF0YVtjb25maWcucGFya2luZ0xvdEZpZWxkXVxuICAgICAgY29uc3QgdXRpbGl6YXRpb25QZXJjZW50YWdlID0gZGF0YVtjb25maWcudXRpbGl6YXRpb25GaWVsZF1cbiAgICAgIGxldCBnZW9tZXRyeSA9IHJlY29yZC5nZW9tZXRyeSBhcyBfX2VzcmkuUG9pbnRcblxuICAgICAgaWYgKCFnZW9tZXRyeSB8fCAhcGFya2luZ0xvdE5hbWUpIGNvbnRpbnVlXG5cbiAgICAgIGNvbnN0IHV0aWxpemF0aW9uQ29sb3IgPSBnZXRVdGlsaXphdGlvbkNvbG9yKE51bWJlcih1dGlsaXphdGlvblBlcmNlbnRhZ2UpIHx8IDApXG4gICAgICBjb25zdCB1dGlsaXphdGlvblRleHQgPSBjb25maWcuc2hvd1V0aWxpemF0aW9uVGV4dCA/IGdldFV0aWxpemF0aW9uVGV4dChOdW1iZXIodXRpbGl6YXRpb25QZXJjZW50YWdlKSB8fCAwKSA6ICcnXG5cbiAgICAgIC8vIFByb2plY3QgZ2VvbWV0cnkgaWYgbmVlZGVkXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBtYXBTUiA9IGppbXVNYXBWaWV3LnZpZXcuc3BhdGlhbFJlZmVyZW5jZVxuICAgICAgICBjb25zdCBnZW9tU1IgPSBnZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlXG4gICAgICAgIFxuICAgICAgICBpZiAocHJvamVjdGlvbiAmJiBnZW9tU1IgJiYgbWFwU1IgJiYgZ2VvbVNSLndraWQgIT09IG1hcFNSLndraWQpIHtcbiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWRHZW9tID0gcHJvamVjdGlvbi5wcm9qZWN0KGdlb21ldHJ5LCBtYXBTUilcbiAgICAgICAgICBpZiAocHJvamVjdGVkR2VvbSkge1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBwcm9qZWN0ZWRHZW9tIGFzIF9fZXNyaS5Qb2ludFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gU2lsZW50bHkgaGFuZGxlIHByb2plY3Rpb24gZXJyb3JzXG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgZ2VvbWV0cnkgdG8gc2NyZWVuIGNvb3JkaW5hdGVzXG4gICAgICBsZXQgc2NyZWVuUG9pbnRcbiAgICAgIHRyeSB7XG4gICAgICAgIHNjcmVlblBvaW50ID0gamltdU1hcFZpZXcudmlldy50b1NjcmVlbihnZW9tZXRyeSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnRpbnVlIC8vIFNraXAgdGhpcyBsYWJlbCBpZiB3ZSBjYW4ndCBjb252ZXJ0IGNvb3JkaW5hdGVzXG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBjdXN0b20gSFRNTCBsYWJlbCBlbGVtZW50XG4gICAgICBjb25zdCBsYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgbGFiZWxFbGVtZW50LmNsYXNzTmFtZSA9ICdwYXJraW5nLWxvdC1tYXAtbGFiZWwnXG4gICAgICBsYWJlbEVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAke3NjcmVlblBvaW50LnggLSA1MH1weDtcbiAgICAgICAgdG9wOiAke3NjcmVlblBvaW50LnkgLSAzMH1weDtcbiAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIHBhZGRpbmc6IDhweCA4cHg7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsMCwwLDAuMTUpO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZDBkMGQwO1xuICAgICAgICBmb250LWZhbWlseTogJ0F2ZW5pciBOZXh0JywgJ0hlbHZldGljYSBOZXVlJywgQXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgICAgIHotaW5kZXg6IDEwMDA7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIG1pbi13aWR0aDogMTQwcHg7XG4gICAgICBgXG4gICAgICBcbiAgICAgIC8vIEFkZCBzcGVlY2ggYnViYmxlIHRhaWwgKG1vdmVkIHRvIGxlZnQgc2lkZSlcbiAgICAgIGNvbnN0IHRhaWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIHRhaWxFbGVtZW50LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgYm90dG9tOiAtOHB4O1xuICAgICAgICBsZWZ0OiAyMHB4O1xuICAgICAgICB3aWR0aDogMDtcbiAgICAgICAgaGVpZ2h0OiAwO1xuICAgICAgICBib3JkZXItbGVmdDogOHB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgICBib3JkZXItcmlnaHQ6IDhweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgICAgYm9yZGVyLXRvcDogOHB4IHNvbGlkIHdoaXRlO1xuICAgICAgICB6LWluZGV4OiAxMDAxO1xuICAgICAgYFxuICAgICAgXG4gICAgICAvLyBBZGQgdGFpbCBib3JkZXJcbiAgICAgIGNvbnN0IHRhaWxCb3JkZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgIHRhaWxCb3JkZXJFbGVtZW50LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgYm90dG9tOiAtOXB4O1xuICAgICAgICBsZWZ0OiAyMHB4O1xuICAgICAgICB3aWR0aDogMDtcbiAgICAgICAgaGVpZ2h0OiAwO1xuICAgICAgICBib3JkZXItbGVmdDogOXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgICBib3JkZXItcmlnaHQ6IDlweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgICAgYm9yZGVyLXRvcDogOXB4IHNvbGlkICNkMGQwZDA7XG4gICAgICAgIHotaW5kZXg6IDEwMDA7XG4gICAgICBgXG5cbiAgICAgIC8vIENyZWF0ZSBjb2xvcmVkIGRvdCBcbiAgICAgIGNvbnN0IGRvdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgZG90RWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICB3aWR0aDogNDBweDtcbiAgICAgICAgaGVpZ2h0OiA0MHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dXRpbGl6YXRpb25Db2xvcn07XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgYFxuXG4gICAgICAvLyBDcmVhdGUgdGV4dCBjb250YWluZXJcbiAgICAgIGNvbnN0IHRleHRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgdGV4dENvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDFweDtcbiAgICAgIGBcblxuICAgICAgLy8gQ3JlYXRlIHV0aWxpemF0aW9uIHRleHQgKGZpcnN0LCBzbyBpdCBhcHBlYXJzIG9uIHRvcCAtIGV4dHJhIGJvbGQsIGJsYWNrLCBiaWcpXG4gICAgICBpZiAoY29uZmlnLnNob3dVdGlsaXphdGlvblRleHQpIHtcbiAgICAgICAgY29uc3QgdXRpbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICB1dGlsRWxlbWVudC50ZXh0Q29udGVudCA9IHV0aWxpemF0aW9uVGV4dFxuICAgICAgICB1dGlsRWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgICBjb2xvcjogIzAwMDAwMDtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS4yO1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA5MDA7XG4gICAgICAgIGBcbiAgICAgICAgdGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZCh1dGlsRWxlbWVudClcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHBhcmtpbmcgbG90IG5hbWUgKHNlY29uZCwgc28gaXQgYXBwZWFycyBiZWxvdyAtIGJsYWNrLCBib2xkLCBzbGlnaHRseSBsYXJnZXIpXG4gICAgICBjb25zdCBuYW1lRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICBuYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHBhcmtpbmdMb3ROYW1lXG4gICAgICBuYW1lRWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgICAgIGNvbG9yOiAjMDAwMDAwO1xuICAgICAgICBsaW5lLWhlaWdodDogMS4yO1xuICAgICAgYFxuICAgICAgdGV4dENvbnRhaW5lci5hcHBlbmRDaGlsZChuYW1lRWxlbWVudClcblxuICAgICAgbGFiZWxFbGVtZW50LmFwcGVuZENoaWxkKGRvdEVsZW1lbnQpXG4gICAgICBsYWJlbEVsZW1lbnQuYXBwZW5kQ2hpbGQodGV4dENvbnRhaW5lcilcbiAgICAgIFxuICAgICAgLy8gQWRkIHRhaWwgZWxlbWVudHNcbiAgICAgIGxhYmVsRWxlbWVudC5hcHBlbmRDaGlsZCh0YWlsQm9yZGVyRWxlbWVudClcbiAgICAgIGxhYmVsRWxlbWVudC5hcHBlbmRDaGlsZCh0YWlsRWxlbWVudClcblxuICAgICAgLy8gQWRkIHRvIG1hcCBjb250YWluZXJcbiAgICAgIG1hcENvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbEVsZW1lbnQpXG5cbiAgICAgIC8vIFN0b3JlIGxhYmVsIGluZm9cbiAgICAgIG5ld0xhYmVscy5wdXNoKHtcbiAgICAgICAgZWxlbWVudDogbGFiZWxFbGVtZW50LFxuICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXG4gICAgICAgIGRhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgbGFiZWxzUmVmLmN1cnJlbnQgPSBuZXdMYWJlbHNcbiAgICBzZXRQYXJraW5nTG90TGFiZWxzKG5ld0xhYmVscylcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwYXJraW5nLWxvdC13aWRnZXQgamltdS13aWRnZXRcIiBkYXRhLXdpZGdldC1pZD17aWR9IHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIGhlaWdodDogJzEwMCUnLCBvdmVyZmxvdzogJ2hpZGRlbicsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PlxuICAgICAgey8qIEhpZGRlbiBtYXAgdmlldyBjb21wb25lbnQgKi99XG4gICAgICB7dXNlTWFwV2lkZ2V0SWRzICYmIHVzZU1hcFdpZGdldElkcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPEppbXVNYXBWaWV3Q29tcG9uZW50XG4gICAgICAgICAgdXNlTWFwV2lkZ2V0SWQ9e3VzZU1hcFdpZGdldElkc1swXX1cbiAgICAgICAgICBvbkFjdGl2ZVZpZXdDaGFuZ2U9e29uQWN0aXZlVmlld0NoYW5nZX1cbiAgICAgICAgLz5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBEYXRhIHNvdXJjZSBjb21wb25lbnQgdG8gbG9hZCBhbmQgdXBkYXRlIGxhYmVscyAqL31cbiAgICAgIHt1c2VEYXRhU291cmNlcyAmJiB1c2VEYXRhU291cmNlcy5sZW5ndGggPiAwICYmIG1hcENvbnRhaW5lciA/IChcbiAgICAgICAgPERhdGFTb3VyY2VDb21wb25lbnQgXG4gICAgICAgICAgdXNlRGF0YVNvdXJjZT17dXNlRGF0YVNvdXJjZXNbMF19IFxuICAgICAgICAgIHdpZGdldElkPXtpZH1cbiAgICAgICAgICBxdWVyeT17eyBwYWdlOiAxLCBwYWdlU2l6ZTogMTAwMCB9fVxuICAgICAgICA+XG4gICAgICAgICAgeyhkczogRGF0YVNvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkcykge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZHMuZ2V0U3RhdHVzKCkgPT09ICdMT0FERUQnICYmICFsYWJlbHNDcmVhdGVkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRzTWFuYWdlciA9IERhdGFTb3VyY2VNYW5hZ2VyLmdldEluc3RhbmNlKClcbiAgICAgICAgICAgICAgY29uc3QgZGF0YVNvdXJjZSA9IGRzTWFuYWdlci5nZXREYXRhU291cmNlKHVzZURhdGFTb3VyY2VzWzBdLmRhdGFTb3VyY2VJZClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChkYXRhU291cmNlICYmIGRhdGFTb3VyY2UudHlwZSA9PT0gJ0ZFQVRVUkVfTEFZRVInKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmVhdHVyZUxheWVyRHMgPSBkYXRhU291cmNlIGFzIGFueVxuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyID0gZmVhdHVyZUxheWVyRHMubGF5ZXJcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIG1hcCB0byBiZSBmdWxseSBsb2FkZWQgYmVmb3JlIHF1ZXJ5aW5nXG4gICAgICAgICAgICAgICAgICBjb25zdCB3YWl0Rm9yTWFwUmVhZHkgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqaW11TWFwVmlldz8udmlldz8ucmVhZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNwZWN0IHRoZSBsYXllcidzIGRlZmluaXRpb24gZXhwcmVzc2lvbiAoZnJvbSB2aWV3cy9maWx0ZXJzKVxuICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vIGRlZmluaXRpb24gZXhwcmVzc2lvbiBleGlzdHMsIHVzZSAnMT0xJyB0byBnZXQgYWxsIGZlYXR1cmVzXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2hlcmVDbGF1c2UgPSBsYXllci5kZWZpbml0aW9uRXhwcmVzc2lvbiB8fCAnMT0xJ1xuICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIGxheWVyLnF1ZXJ5RmVhdHVyZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHdoZXJlQ2xhdXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0RmllbGRzOiBbJyonXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkdlb21ldHJ5OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmZlYXR1cmVzICYmIHJlc3VsdC5mZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBhIHNtYWxsIGRlbGF5IHRvIGVuc3VyZSBwcm9qZWN0aW9uIGlzIHJlYWR5XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUN1c3RvbUxhYmVscyhyZXN1bHQuZmVhdHVyZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGFiZWxzQ3JlYXRlZCh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXRyeSBhZnRlciBhIGRlbGF5IGlmIHByb2plY3Rpb24gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygncHJvamVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXRGb3JNYXBSZWFkeSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHdhaXRGb3JNYXBSZWFkeSwgMTAwKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHdhaXRGb3JNYXBSZWFkeSgpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpbGVudGx5IGhhbmRsZSBtaXNzaW5nIGxheWVyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNpbGVudGx5IGhhbmRsZSBub24tZmVhdHVyZSBsYXllclxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgfX1cbiAgICAgICAgPC9EYXRhU291cmNlQ29tcG9uZW50PlxuICAgICAgKSA6IG51bGx9XG5cbiAgICAgIHsvKiBTdGF0dXMgbWVzc2FnZXMgKi99XG4gICAgICB7IXVzZU1hcFdpZGdldElkcyB8fCB1c2VNYXBXaWRnZXRJZHMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5vLWRhdGFcIj5cbiAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInNlbGVjdE1hcFwiIGRlZmF1bHRNZXNzYWdlPVwiUGxlYXNlIHNlbGVjdCBhIG1hcCB3aWRnZXQgaW4gdGhlIHNldHRpbmdzXCIvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICkgOiAhdXNlRGF0YVNvdXJjZXMgfHwgdXNlRGF0YVNvdXJjZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5vLWRhdGFcIj5cbiAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbmZpZ3VyZURhdGFTb3VyY2VcIiBkZWZhdWx0TWVzc2FnZT17ZGVmYXVsdEkxOG5NZXNzYWdlcy5jb25maWd1cmVEYXRhU291cmNlfS8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKSA6IG51bGx9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgV2lkZ2V0XG5cbiBleHBvcnQgZnVuY3Rpb24gX19zZXRfd2VicGFja19wdWJsaWNfcGF0aF9fKHVybCkgeyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyA9IHVybCB9Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9